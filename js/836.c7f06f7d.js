(self["webpackChunki"]=self["webpackChunki"]||[]).push([[836],{9387:function(e){!function(t,a){e.exports=a()}(0,(function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(a,o,i){var n,r=function(e,a,o){void 0===o&&(o={});var i=new Date(e),n=function(e,a){void 0===a&&(a={});var o=a.timeZoneName||"short",i=e+"|"+o,n=t[i];return n||(n=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:o}),t[i]=n),n}(a,o);return n.formatToParts(i)},l=function(t,a){for(var o=r(t,a),n=[],l=0;l<o.length;l+=1){var s=o[l],u=s.type,c=s.value,d=e[u];d>=0&&(n[d]=parseInt(c,10))}var p=n[3],m=24===p?0:p,g=n[0]+"-"+n[1]+"-"+n[2]+" "+m+":"+n[4]+":"+n[5]+":000",h=+t;return(i.utc(g).valueOf()-(h-=h%1e3))/6e4},s=o.prototype;s.tz=function(e,t){void 0===e&&(e=n);var a,o=this.utcOffset(),r=this.toDate(),l=r.toLocaleString("en-US",{timeZone:e}),s=Math.round((r-new Date(l))/1e3/60),u=15*-Math.round(r.getTimezoneOffset()/15)-s;if(Number(u)){if(a=i(l,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(u,!0),t){var c=a.utcOffset();a=a.add(o-c,"minute")}}else a=this.utcOffset(0,t);return a.$x.$timezone=e,a},s.offsetName=function(e){var t=this.$x.$timezone||i.tz.guess(),a=r(this.valueOf(),t,{timeZoneName:e}).find((function(e){return"timezonename"===e.type.toLowerCase()}));return a&&a.value};var u=s.startOf;s.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return u.call(this,e,t);var a=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return u.call(a,e,t).tz(this.$x.$timezone,!0)},i.tz=function(e,t,a){var o=a&&t,r=a||t||n,s=l(+i(),r);if("string"!=typeof e)return i(e).tz(r);var u=function(e,t,a){var o=e-60*t*1e3,i=l(o,a);if(t===i)return[o,t];var n=l(o-=60*(i-t)*1e3,a);return i===n?[o,i]:[e-60*Math.min(i,n)*1e3,Math.max(i,n)]}(i.utc(e,o).valueOf(),s,r),c=u[0],d=u[1],p=i(c).utcOffset(d);return p.$x.$timezone=r,p},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(e){n=e}}}))},178:function(e){!function(t,a){e.exports=a()}(0,(function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(o,i,n){var r=i.prototype;n.utc=function(e){var t={date:e,utc:!0,args:arguments};return new i(t)},r.utc=function(t){var a=n(this.toDate(),{locale:this.$L,utc:!0});return t?a.add(this.utcOffset(),e):a},r.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var l=r.parse;r.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),l.call(this,e)};var s=r.init;r.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var u=r.utcOffset;r.utcOffset=function(o,i){var n=this.$utils().u;if(n(o))return this.$u?0:n(this.$offset)?u.call(this):this.$offset;if("string"==typeof o&&(o=function(e){void 0===e&&(e="");var o=e.match(t);if(!o)return null;var i=(""+o[0]).match(a)||["-",0,0],n=i[0],r=60*+i[1]+ +i[2];return 0===r?0:"+"===n?r:-r}(o),null===o))return this;var r=Math.abs(o)<=16?60*o:o,l=this;if(i)return l.$offset=r,l.$u=0===o,l;if(0!==o){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(l=this.local().add(r+s,e)).$offset=r,l.$x.$localOffset=s}else l=this.utc();return l};var c=r.format;r.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},r.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()};var d=r.toDate;r.toDate=function(e){return"s"===e&&this.$offset?n(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var p=r.diff;r.diff=function(e,t,a){if(e&&this.$u===e.$u)return p.call(this,e,t,a);var o=this.local(),i=n(e).local();return p.call(o,i,t,a)}}}))},878:function(e,t,a){"use strict";a.d(t,{Dv:function(){return r},UA:function(){return n},Vm:function(){return i}});var o=a(6102);function i(){return(0,o.VM)().get("/api/uc/user/security/device")}function n(e,t){return(0,o.VM)().put(`/api/uc/user/security/device/${e}`,t)}function r(e){return(0,o.VM)().delete(`/api/uc/user/security/device/${e}`)}},1259:function(e,t,a){"use strict";a.d(t,{$Y:function(){return b},zp:function(){return w},p6:function(){return v},Xj:function(){return y},HO:function(){return f}});var o=a(9996),i=(a(1814),a(7484)),n=a.n(i),r=a(178),l=a.n(r),s=a(9387),u=a.n(s);n().extend(l()),n().extend(u());class c{constructor(e=null){this.userTimezone=e||Intl.DateTimeFormat().resolvedOptions().timeZone,this.storedTimezone="Asia/Shanghai"}convert(e){const t=n()(e).tz(this.storedTimezone);return t.tz(this.userTimezone)}format(e,t){return this.convert(e).format(t)}}var d=c;const p={iPhone:"iphone","Android Phone":"android",Pad:"pad",iPad:"pad","Windows PC":"windows",Mac:"mac",Phone:"phone","Linux PC":"linux","Unknown Device":"pad"};var m=a(2727);const g=new d,{global:{t:h}}=m.a;function v(e,t="date"){if(e){if("date"===t)return g.format(e,"YYYY-MM-DD");if("time"===t)return g.format(e,"HH:mm:ss");if("hour"===t)return g.format(e,"HH:mm");if("datetime"===t)return g.format(e,"YYYY-MM-DD HH:mm:ss")}}function f(e){const t={};for(const a in e)null!==e[a]&&void 0!==e[a]&&""!==e[a]&&(t[a]=e[a]);return t}function w(e){if(navigator.clipboard)navigator.clipboard.writeText(e),(0,o.bM)({title:h("common.messagebox.copySuccess"),message:e,type:"success"});else{const t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),(0,o.bM)({title:h("common.messagebox.copySuccess"),message:e,type:"success"})}}function b({array:e=[],key:t="key",remainKey:a=""}={}){return null===e||void 0===e||!e.length||!e.every((e=>t in e))||a&&!e.every((e=>a in e))?(console.log("【参数错误】",e,t,a),{}):e.reduce(((e,o)=>({...e,[o[t]]:a?o[a]:o})),{})}function y(e){if(!e)return"";const t=p[e]||"";return t?a(2598)(`./${t}.svg`):""}},6430:function(e,t,a){"use strict";a.d(t,{Z:function(){return y}});var o=a(6252),i=a(3577),n=a(9963);const r={class:"c-header"},l={class:"c-header_main"},s={class:"c-header-left"},u={key:0,class:"c-header__title"},c={key:1,class:"c-header__desc"},d={class:"c-header-right"},p={class:"c-header__profile"},m={class:"u-name"};function g(e,t,a,g,h,v){var f,w;const b=(0,o.up)("lang-select"),y=(0,o.up)("el-dropdown-item"),_=(0,o.up)("el-dropdown-menu"),$=(0,o.up)("el-dropdown");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",l,[(0,o._)("div",s,[null!==(f=v.routeMeta)&&void 0!==f&&f.title?((0,o.wg)(),(0,o.iD)("div",u,(0,i.zw)(v.routeMeta.title),1)):(0,o.kq)("",!0),null!==(w=v.routeMeta)&&void 0!==w&&w.desc?((0,o.wg)(),(0,o.iD)("div",c,(0,i.zw)(v.routeMeta.desc),1)):(0,o.kq)("",!0)]),(0,o._)("div",d,[(0,o.Wm)(b,{class:"c-header__lang",selected:"icon",onChange:v.onLangChange,lang:v.lang},null,8,["onChange","lang"]),(0,o.Wm)($,{trigger:"click"},{dropdown:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,{onClick:(0,n.iM)(v.logout,["stop"])},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.$t("account.common.logout")),1)])),_:1},8,["onClick"])])),_:1})])),default:(0,o.w5)((()=>[(0,o._)("div",p,[(0,o._)("span",m,(0,i.zw)(v.profile.username||v.profile.nickname),1)])])),_:1})])])])}var h=a(9158),v=a(2878),f={name:"PageHeader",data:function(){return{}},computed:{routeMeta(){return this.$route.meta},profile(){return this.$store.state.user},avatar(){var e;return(null===(e=this.profile)||void 0===e?void 0:e.avatar)&&"null"!=this.profile.avatar||a(9743)},app(){return this.$store.state.app},lang(){return h.Z.getLocale()}},watch:{},methods:{logout(){(0,v.kS)().then((()=>{h.Z.logout(),this.$router.push({name:"email-login"})}))},onLangChange(e){(0,v.gS)({lang:e},{app:this.app}).then((()=>{location.reload()}))}}},w=a(3744);const b=(0,w.Z)(f,[["render",g]]);var y=b},1836:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ue}});var o=a(6252);const i={class:"p-log"},n={class:"l-dashboard-primary m-log-box"};function r(e,t,a,r,l,s){const u=(0,o.up)("page-header"),c=(0,o.up)("logNav");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(u),(0,o._)("div",n,[(0,o.Wm)(c),s.isInTypes?((0,o.wg)(),(0,o.j4)((0,o.LL)(s.type),{key:0,app:e.app,devices:l.devices},null,8,["app","devices"])):(0,o.kq)("",!0)])])}var l=a(3907),s=a(3577);const u={class:"m-log-filter w-card"},c={class:"m-log-filter__group"},d=["onClick"],p=["src"];function m(e,t,a,i,n,r){const l=(0,o.Q2)("svg-inline");return(0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",c,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.types,(e=>((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(["m-log-filter__item",n.type===e.value?"is-active":""]),key:e.value,onClick:t=>r.typeChange(e.value)},[(0,o.wy)((0,o._)("img",{class:"u-img",src:r.getIcon(e.value)},null,8,p),[[l]]),(0,o._)("b",null,(0,s.zw)(e.label),1)],10,d)))),128))])])}var g=a(2727);const{global:{t:h}}=g.a,v=[{value:"login",label:h("security.log.type.login")},{value:"account",label:h("security.log.type.account")},{value:"action",label:h("security.log.type.action")}],f=[{value:"",label:h("security.log.status.all")},{value:1,label:h("security.log.status.success")},{value:0,label:h("security.log.status.fail")}];var w={name:"LogFilter",data(){return{types:v,type:"login"}},computed:{params(){const{type:e}=this.$route.params;return{type:e}}},watch:{params:{deep:!0,handler:function(e){this.type=e.type||"login",this.$router.push({params:e})}}},methods:{typeChange(e){const t={type:e};this.$router.push({params:t})},getIcon(e){return a(3920)(`./${e}_log.svg`)}}},b=a(3744);const y=(0,b.Z)(w,[["render",m]]);var _=y,$=a(6430);const D={class:"m-log-main w-card m-login-logs"},k={class:"m-table-filter"},x={class:"u-op"},z={class:"u-op-icon"},W={class:"u-row"},M=["src"];function O(e,t,a,i,n,r){const l=(0,o.up)("Refresh"),u=(0,o.up)("el-icon"),c=(0,o.up)("el-tooltip"),d=(0,o.up)("arrow-down"),p=(0,o.up)("el-dropdown-item"),m=(0,o.up)("el-dropdown-menu"),g=(0,o.up)("el-dropdown"),h=(0,o.up)("el-date-picker"),v=(0,o.up)("Search"),f=(0,o.up)("el-input"),w=(0,o.up)("el-tag"),b=(0,o.up)("el-table-column"),y=(0,o.up)("el-table"),_=(0,o.up)("el-pagination"),$=(0,o.Q2)("loading");return(0,o.wg)(),(0,o.iD)("div",D,[(0,o._)("div",k,[(0,o._)("div",x,[(0,o.Wm)(c,{class:"u-box-item",effect:"light",content:e.$t("common.table.refresh"),placement:"top"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"u-op-icon u-refresh",onClick:t[0]||(t[0]=(...e)=>r.load&&r.load(...e))},[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l)])),_:1})])])),_:1},8,["content"]),(0,o.Wm)(g,null,{dropdown:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.statusList,(e=>((0,o.wg)(),(0,o.j4)(p,{key:e.value,onClick:t=>r.onStatusChange(e.value)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.label),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,o.w5)((()=>[(0,o._)("span",z,[(0,o.Wm)(u,{class:"el-icon--right"},{default:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1})])])),_:1}),(0,o.Wm)(h,{modelValue:n.dateRange,"onUpdate:modelValue":t[1]||(t[1]=e=>n.dateRange=e),type:"daterange","start-placeholder":e.$t("common.table.start_time"),"end-placeholder":e.$t("common.table.end_time"),shortcuts:n.shortcuts},null,8,["modelValue","start-placeholder","end-placeholder","shortcuts"])]),(0,o.Wm)(f,{class:"u-search",modelValue:n.search,"onUpdate:modelValue":t[2]||(t[2]=e=>n.search=e),placeholder:e.$t("common.table.search")},{prefix:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v)])),_:1})])),_:1},8,["modelValue","placeholder"])]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(y,{class:"m-table",data:n.tableData,"max-height":"600px",size:"large"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{label:e.$t("security.log.table.status"),prop:"remark",width:"150","show-overflow-tooltip":""},{default:(0,o.w5)((({row:e})=>[(0,o.Wm)(w,{type:e.status?"success":"warning"},{default:(0,o.w5)((()=>{var t;return[(0,o.Uk)((0,s.zw)(null===(t=r.statusMap[e.status])||void 0===t?void 0:t.label),1)]})),_:2},1032,["type"])])),_:1},8,["label"]),(0,o.Wm)(b,{label:e.$t("security.log.table.app"),prop:"app",width:"110"},{default:(0,o.w5)((({row:e})=>{var t;return[(0,o.Uk)((0,s.zw)(null===(t=r.appMap[e.app])||void 0===t?void 0:t.label),1)]})),_:1},8,["label"]),(0,o.Wm)(b,{label:e.$t("security.log.table.device"),prop:"device","show-overflow-tooltip":""},{default:(0,o.w5)((({row:e})=>[(0,o._)("div",W,[r.getDeviceIcon(e.device)?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"u-device",src:r.getDeviceIcon(e.device)},null,8,M)):(0,o.kq)("",!0),(0,o._)("span",null,(0,s.zw)(r.getDeviceName(e.device)),1)])])),_:1},8,["label"]),(0,o.Wm)(b,{label:"IP",prop:"ip","show-overflow-tooltip":""}),(0,o.Wm)(b,{label:e.$t("security.log.table.time"),prop:"time",width:"180"},{default:(0,o.w5)((({row:e})=>[(0,o.Uk)((0,s.zw)(r.formatDate(e.time,"datetime")),1)])),_:1},8,["label"])])),_:1},8,["data"])),[[$,n.loading]]),(0,o.Wm)(_,{class:"m-pagination",currentPage:n.page,"onUpdate:currentPage":t[3]||(t[3]=e=>n.page=e),background:"",pageSize:n.per,"onUpdate:pageSize":t[4]||(t[4]=e=>n.per=e),layout:"prev, pager, next",total:n.total,size:"small","hide-on-single-page":""},null,8,["currentPage","pageSize","total"])])}var C=a(1259),S=a(6102);function U(e){return(0,S.VM)().get("/api/uc/log/login",{params:e})}function P(e){return(0,S.VM)().get("/api/uc/log/account",{params:e})}function T(e){return(0,S.VM)().get("/api/uc/log/action",{params:e})}var Y=a(6486);const{global:{t:V}}=g.a,I=[{text:V("common.table.shortcuts.week"),value:()=>{const e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:V("common.table.shortcuts.month"),value:()=>{const e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:V("common.table.shortcuts.month_3"),value:()=>{const e=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]}}];var H=a(9447),N={name:"login-log",props:{app:{type:String,default:""},devices:{type:Array,default:()=>[]}},data(){return{loading:!1,tableData:[],search:"",status:"",dateRange:[],shortcuts:I,statusList:f,page:1,per:10,total:0}},computed:{params(){var e,t;return{app:"iruxu"===this.app?"":this.app,status:this.status,search:this.search,start_time:null===(e=this.dateRange)||void 0===e?void 0:e[0],end_time:null===(t=this.dateRange)||void 0===t?void 0:t[1]}},pageParams(){return{page:this.page,limit:this.per}},appMap(){return(0,C.$Y)({array:H.h,key:"value"})},statusMap(){return(0,C.$Y)({array:f,key:"value"})}},watch:{params:{immediate:!0,deep:!0,handler:(0,Y.debounce)((function(){1===this.page?this.load():this.page=1}),500)},page(){this.load()}},methods:{getDeviceName(e){const t=this.devices.find((t=>t.device===e))||{id:e};return t.remark||t.name||t.id},getDeviceIcon(e){var t;const a=null===(t=this.devices.find((t=>t.device===e)))||void 0===t?void 0:t.name;return(0,C.Xj)(a)},onStatusChange(e){this.status=e},formatDate:C.p6,builtParams(){return(0,C.HO)(Object.assign(this.params,this.pageParams))},load(){const e=this.builtParams();this.loading=!0,U(e).then((e=>{var t,a,o;this.tableData=(null===(t=e.data.data)||void 0===t?void 0:t.list)||[],this.total=(null===(a=e.data)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.total)||0})).finally((()=>{this.loading=!1}))}}};const R=(0,b.Z)(N,[["render",O]]);var Z=R;const L={class:"m-log-main w-card m-login-logs"},j={class:"m-table-filter"},F={class:"u-op"},q={class:"u-row"},A=["src"];function E(e,t,a,i,n,r){const l=(0,o.up)("Refresh"),u=(0,o.up)("el-icon"),c=(0,o.up)("el-tooltip"),d=(0,o.up)("el-date-picker"),p=(0,o.up)("Search"),m=(0,o.up)("el-input"),g=(0,o.up)("el-table-column"),h=(0,o.up)("el-table"),v=(0,o.up)("el-pagination"),f=(0,o.Q2)("loading");return(0,o.wg)(),(0,o.iD)("div",L,[(0,o._)("div",j,[(0,o._)("div",F,[(0,o.Wm)(c,{class:"u-box-item",effect:"light",content:e.$t("common.table.refresh"),placement:"top"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"u-op-icon u-refresh",onClick:t[0]||(t[0]=(...e)=>r.load&&r.load(...e))},[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l)])),_:1})])])),_:1},8,["content"]),(0,o.Wm)(d,{modelValue:n.dateRange,"onUpdate:modelValue":t[1]||(t[1]=e=>n.dateRange=e),type:"daterange","start-placeholder":e.$t("common.table.start_time"),"end-placeholder":e.$t("common.table.end_time"),shortcuts:n.shortcuts},null,8,["modelValue","start-placeholder","end-placeholder","shortcuts"])]),(0,o.Wm)(m,{class:"u-search",modelValue:n.search,"onUpdate:modelValue":t[2]||(t[2]=e=>n.search=e),placeholder:e.$t("common.table.search")},{prefix:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p)])),_:1})])),_:1},8,["modelValue","placeholder"])]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(h,{class:"m-table",data:n.tableData,"max-height":"600px",size:"large"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:e.$t("security.log.table.event"),prop:"event",width:"150","show-overflow-tooltip":""},null,8,["label"]),(0,o.Wm)(g,{label:e.$t("security.log.table.app"),prop:"app",width:"110"},{default:(0,o.w5)((({row:e})=>{var t;return[(0,o.Uk)((0,s.zw)(null===(t=r.appMap[e.app])||void 0===t?void 0:t.label),1)]})),_:1},8,["label"]),(0,o.Wm)(g,{label:e.$t("security.log.table.device"),prop:"device","show-overflow-tooltip":""},{default:(0,o.w5)((({row:e})=>[(0,o._)("div",q,[r.getDeviceIcon(e.device)?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"u-device",src:r.getDeviceIcon(e.device)},null,8,A)):(0,o.kq)("",!0),(0,o._)("span",null,(0,s.zw)(r.getDeviceName(e.device)),1)])])),_:1},8,["label"]),(0,o.Wm)(g,{label:"IP",prop:"ip","show-overflow-tooltip":""}),(0,o.Wm)(g,{label:e.$t("security.log.table.time"),prop:"time",width:"180"},{default:(0,o.w5)((({row:e})=>[(0,o.Uk)((0,s.zw)(r.formatDate(e.time,"datetime")),1)])),_:1},8,["label"])])),_:1},8,["data"])),[[f,n.loading]]),(0,o.Wm)(v,{class:"m-pagination",currentPage:n.page,"onUpdate:currentPage":t[3]||(t[3]=e=>n.page=e),background:"",pageSize:n.per,"onUpdate:pageSize":t[4]||(t[4]=e=>n.per=e),layout:"prev, pager, next",total:n.total,size:"small","hide-on-single-page":""},null,8,["currentPage","pageSize","total"])])}var Q={name:"account-log",props:{devices:{type:Array,default:()=>[]}},data(){return{loading:!1,tableData:[],search:"",dateRange:[],shortcuts:I,page:1,per:10,total:0}},computed:{params(){var e,t;return{search:this.search,start_time:null===(e=this.dateRange)||void 0===e?void 0:e[0],end_time:null===(t=this.dateRange)||void 0===t?void 0:t[1]}},pageParams(){return{page:this.page,limit:this.per}},appMap(){return(0,C.$Y)({array:H.h,key:"value"})}},watch:{params:{immediate:!0,deep:!0,handler:(0,Y.debounce)((function(){1===this.page?this.load():this.page=1}),500)},page(){this.load()}},methods:{getDeviceName(e){const t=this.devices.find((t=>t.device===e))||{id:e};return t.remark||t.name||t.id},getDeviceIcon(e){var t;const a=null===(t=this.devices.find((t=>t.device===e)))||void 0===t?void 0:t.name;return(0,C.Xj)(a)},formatDate:C.p6,builtParams(){return(0,C.HO)(Object.assign(this.params,this.pageParams))},load(){const e=this.builtParams();this.loading=!0,P(e).then((e=>{var t,a,o;this.tableData=(null===(t=e.data.data)||void 0===t?void 0:t.list)||[],this.total=(null===(a=e.data)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.total)||0})).finally((()=>{this.loading=!1}))}}};const X=(0,b.Z)(Q,[["render",E]]);var K=X;const J={class:"m-log-main w-card m-login-logs"},B={class:"m-table-filter"},G={class:"u-op"},ee={class:"u-row"},te=["src"];function ae(e,t,a,i,n,r){const l=(0,o.up)("Refresh"),u=(0,o.up)("el-icon"),c=(0,o.up)("el-tooltip"),d=(0,o.up)("el-date-picker"),p=(0,o.up)("Search"),m=(0,o.up)("el-input"),g=(0,o.up)("el-table-column"),h=(0,o.up)("el-table"),v=(0,o.up)("el-pagination"),f=(0,o.Q2)("loading");return(0,o.wg)(),(0,o.iD)("div",J,[(0,o._)("div",B,[(0,o._)("div",G,[(0,o.Wm)(c,{class:"u-box-item",effect:"light",content:e.$t("common.table.refresh"),placement:"top"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"u-op-icon u-refresh",onClick:t[0]||(t[0]=(...e)=>r.load&&r.load(...e))},[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l)])),_:1})])])),_:1},8,["content"]),(0,o.Wm)(d,{modelValue:n.dateRange,"onUpdate:modelValue":t[1]||(t[1]=e=>n.dateRange=e),type:"daterange","start-placeholder":e.$t("common.table.start_time"),"end-placeholder":e.$t("common.table.end_time"),shortcuts:n.shortcuts},null,8,["modelValue","start-placeholder","end-placeholder","shortcuts"])]),(0,o.Wm)(m,{class:"u-search",modelValue:n.search,"onUpdate:modelValue":t[2]||(t[2]=e=>n.search=e),placeholder:e.$t("common.table.search")},{prefix:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p)])),_:1})])),_:1},8,["modelValue","placeholder"])]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(h,{class:"m-table",data:n.tableData,"max-height":"600px",size:"large"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:e.$t("security.log.table.action"),prop:"action",width:"150","show-overflow-tooltip":""},{default:(0,o.w5)((({row:e})=>[(0,o._)("span",{class:(0,s.C_)(e.status?"":"u-error")},(0,s.zw)(e.remark),3)])),_:1},8,["label"]),(0,o.Wm)(g,{label:e.$t("security.log.table.app"),prop:"app",width:"110"},{default:(0,o.w5)((({row:e})=>{var t;return[(0,o.Uk)((0,s.zw)(null===(t=r.appMap[e.app])||void 0===t?void 0:t.label),1)]})),_:1},8,["label"]),(0,o.Wm)(g,{label:e.$t("security.log.table.device"),prop:"device","show-overflow-tooltip":""},{default:(0,o.w5)((({row:e})=>[(0,o._)("div",ee,[r.getDeviceIcon(e.device)?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"u-device",src:r.getDeviceIcon(e.device)},null,8,te)):(0,o.kq)("",!0),(0,o._)("span",null,(0,s.zw)(r.getDeviceName(e.device)),1)])])),_:1},8,["label"]),(0,o.Wm)(g,{label:"IP",prop:"ip","show-overflow-tooltip":""}),(0,o.Wm)(g,{label:e.$t("security.log.table.time"),prop:"time",width:"180"},{default:(0,o.w5)((({row:e})=>[(0,o.Uk)((0,s.zw)(r.formatDate(e.time,"datetime")),1)])),_:1},8,["label"])])),_:1},8,["data"])),[[f,n.loading]]),(0,o.Wm)(v,{class:"m-pagination",currentPage:n.page,"onUpdate:currentPage":t[3]||(t[3]=e=>n.page=e),background:"",pageSize:n.per,"onUpdate:pageSize":t[4]||(t[4]=e=>n.per=e),layout:"prev, pager, next",total:n.total,size:"small","hide-on-single-page":""},null,8,["currentPage","pageSize","total"])])}var oe={name:"action-log",props:{app:{type:String,default:""},devices:{type:Array,default:()=>[]}},data(){return{loading:!1,tableData:[],search:"",dateRange:[],shortcuts:I,page:1,per:10,total:0}},computed:{params(){var e,t;return{app:"iruxu"===this.app?"":this.app,search:this.search,start_time:null===(e=this.dateRange)||void 0===e?void 0:e[0],end_time:null===(t=this.dateRange)||void 0===t?void 0:t[1]}},pageParams(){return{page:this.page,limit:this.per}},appMap(){return(0,C.$Y)({array:H.h,key:"value"})}},watch:{params:{immediate:!0,deep:!0,handler:(0,Y.debounce)((function(){1===this.page?this.load():this.page=1}),500)},page(){this.load()}},methods:{getDeviceName(e){const t=this.devices.find((t=>t.device===e))||{id:e};return t.remark||t.name||t.id},getDeviceIcon(e){var t;const a=null===(t=this.devices.find((t=>t.device===e)))||void 0===t?void 0:t.name;return(0,C.Xj)(a)},formatDate:C.p6,builtParams(){return(0,C.HO)(Object.assign(this.params,this.pageParams))},load(){const e=this.builtParams();this.loading=!0,T(e).then((e=>{var t,a,o;this.tableData=(null===(t=e.data.data)||void 0===t?void 0:t.list)||[],this.total=(null===(a=e.data)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.total)||0})).finally((()=>{this.loading=!1}))}}};const ie=(0,b.Z)(oe,[["render",ae]]);var ne=ie,re=a(878),le={name:"dashboard-security-log",components:{pageHeader:$.Z,logNav:_,login:Z,account:K,action:ne},data(){return{devices:[]}},computed:{...(0,l.rn)(["app"]),type(){return this.$route.params.type||"login"},isInTypes(){return v.findIndex((e=>e.value===this.type))>-1}},mounted(){this.load()},methods:{load(){(0,re.Vm)().then((e=>{this.devices=e.data.data||[]}))}}};const se=(0,b.Z)(le,[["render",r]]);var ue=se},3920:function(e,t,a){var o={"./account_log.svg":1010,"./action_log.svg":8890,"./login_log.svg":207};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=n,e.exports=i,i.id=3920},2598:function(e,t,a){var o={"./android.svg":3044,"./iphone.svg":4581,"./linux.svg":2175,"./mac.svg":864,"./pad.svg":1921,"./pc.svg":5172,"./phone.svg":5519,"./windows.svg":1184};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=n,e.exports=i,i.id=2598},1010:function(e,t,a){"use strict";e.exports=a.p+"img/account_log.5ebf4874.svg"},8890:function(e,t,a){"use strict";e.exports=a.p+"img/action_log.b4009e34.svg"},207:function(e,t,a){"use strict";e.exports=a.p+"img/login_log.fec4d912.svg"},3044:function(e,t,a){"use strict";e.exports=a.p+"img/android.6e2cae2e.svg"},4581:function(e,t,a){"use strict";e.exports=a.p+"img/iphone.037232b8.svg"},2175:function(e,t,a){"use strict";e.exports=a.p+"img/linux.e999220d.svg"},864:function(e,t,a){"use strict";e.exports=a.p+"img/mac.f2227271.svg"},1921:function(e,t,a){"use strict";e.exports=a.p+"img/pad.955d800a.svg"},5172:function(e,t,a){"use strict";e.exports=a.p+"img/pc.099a1c96.svg"},5519:function(e,t,a){"use strict";e.exports=a.p+"img/phone.67713635.svg"},1184:function(e,t,a){"use strict";e.exports=a.p+"img/windows.1c9c1966.svg"},2570:function(e,t,a){"use strict";e.exports=a.p+"img/logo.e213a56c.svg"},9743:function(e,t,a){"use strict";e.exports=a.p+"img/test.2ffd992c.png"},1814:function(e){"use strict";e.exports=JSON.parse('{"S":"https://cdn.iruxu.com"}')}}]);
//# sourceMappingURL=836.c7f06f7d.js.map