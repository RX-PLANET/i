{"version":3,"file":"js/156.e0b482db.js","mappings":"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","sources":["webpack://i/./src/service/phone.js","webpack://i/./src/components/account/common/footer.vue","webpack://i/./src/components/account/common/footer.vue?db8a","webpack://i/./src/views/account/phone/code-login.vue","webpack://i/./src/views/account/phone/components/code-login.vue","webpack://i/./src/views/account/phone/components/code-login.vue?a4c3","webpack://i/./src/views/account/phone/code-login.vue?ecc3"],"sourcesContent":["import { $uc } from \"@iruxu/rx-common/utils/api\";\n\n// ============ 手机相关 ============\n\n// 注册\n/**\n * 查询手机号是否可用\n * @param {String} phone 手机号\n * @returns {Promise}\n */\nexport async function checkPhone(phone) {\n    return $uc()\n        .get(\"/api/uc/user/account/phone/valid\", {\n            params: {\n                phone,\n            },\n        })\n        .then((res) => res.data.data?.isExist);\n}\n\n/**\n * 注册账号 - 手机注册\n * @param {Object} data\n * @param {String} data.phone 手机号\n * @param {Object} params\n * @param {String} params.app 应用标识\n * @returns\n */\nexport function registerByPhone(data, params) {\n    return $uc().post(\"/api/uc/user/account/phone/register\", data, {\n        params,\n    });\n}\n\n/**\n * 校验手机与验证码\n * @param {Object} params\n * @param {String} params.phone 手机号\n * @param {String} params.code 验证码\n * @returns\n */\nexport async function checkPhoneCode(params) {\n    return $uc().get(\"/api/uc/user/account/phone/check-code\", {\n        params,\n    });\n}\n\n/**\n * 手机注册 - 激活\n * @param {String} data.phone 手机号\n * @param {String} data.password 密码\n * @param {Object} params\n * @param {String} params.app 应用标识\n */\nexport function activeByPhone(data, params) {\n    return $uc().post(\"/api/uc/user/account/phone/active\", data, {\n        params,\n    });\n}\n\n// 绑定\n\n/**\n * 绑定手机号\n * @param {Object} data\n * @param {String} data.phone 手机号\n * @param {Object} params\n * @param {String} params.app 应用标识\n */\nexport function bindPhone(data, params) {\n    return $uc().post(\"/api/uc/user/account/phone/bind\", data, {\n        params,\n    });\n}\n\n// 登录\n\n/**\n * 手机登录 - 账号密码\n * @param {Object} data\n * @param {String} data.phone 手机号\n * @param {String} data.password 密码\n * @param {Object} params\n * @param {String} params.app 应用标识\n */\nexport function loginByPhone(data, params) {\n    return $uc().post(\"/api/uc/user/account/phone/login\", data, {\n        params,\n    });\n}\n\n/**\n * 手机登录 - 发送验证码\n * @param {Object} data\n * @param {String} data.phone 手机号\n * @param {Object} params\n * @param {String} params.app 应用标识\n */\nexport function sendLoginCode(data, params) {\n    return $uc().post(\"/api/uc/user/account/phone/login/code-send\", data, {\n        params,\n    });\n}\n\n/**\n * 手机登录 - 验证码\n * @param {Object} data\n * @param {String} data.phone 手机号\n * @param {String} data.code 验证码\n * @param {Object} params\n * @param {String} params.app 应用标识\n */\nexport function loginByPhoneCode(data, params) {\n    return $uc().post(\"/api/uc/user/account/phone/login/code-verify\", data, {\n        params,\n    });\n}\n\n// 忘记密码\n\n/**\n * 忘记密码 - 发送验证码\n * @param {Object} data\n * @param {String} data.phone 手机号\n * @param {Object} params\n * @param {String} params.app 应用标识\n */\nexport function sendCode(data, params) {\n    return $uc().post(\"/api/uc/user/account/phone/forgot-password\", data, {\n        params,\n    });\n}\n\n/**\n * 重置密码\n * @param {Object} data\n * @param {String} data.phone 手机号\n * @param {String} data.code 验证码\n * @param {String} data.password 密码\n * @param {Object} params\n * @param {String} params.app 应用标识\n */\nexport function resetPassword(data, params) {\n    return $uc().put(\"/api/uc/user/account/phone/reset-password\", data, {\n        params,\n    });\n}\n","<template>\n    <footer class=\"m-footer\">© RX-PLANET</footer>\n</template>\n\n<script>\nexport default {\n    name: \"RX-Footer1\",\n    props: [],\n    components: {},\n    data: function () {\n        return {};\n    },\n    computed: {},\n    watch: {},\n    methods: {},\n    created: function () {},\n    mounted: function () {},\n};\n</script>\n\n<style lang=\"less\">\n.m-footer {\n    padding: 10px 0;\n    text-align: center;\n    font-size: 12px;\n    letter-spacing: 0.5px;\n    color: #999;\n    font-family: \"Trebuchet MS\", \"Lucida Sans Unicode\", \"Lucida Grande\", \"Lucida Sans\", Arial, sans-serif;\n}\n</style>\n","import { render } from \"./footer.vue?vue&type=template&id=6038436a\"\nimport script from \"./footer.vue?vue&type=script&lang=js\"\nexport * from \"./footer.vue?vue&type=script&lang=js\"\n\nimport \"./footer.vue?vue&type=style&index=0&id=6038436a&lang=less\"\n\nimport exportComponent from \"/home/runner/work/i/i/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div class=\"p-account p-account-phone--login\">\n        <el-row class=\"m-container\" justify=\"center\">\n            <div class=\"m-login\">\n                <logo :app=\"app\" />\n                <login :app=\"app\" :registerLink=\"registerLink\" :resetPwdLink=\"resetPwdLink\"></login>\n            </div>\n        </el-row>\n        <Footer />\n    </div>\n</template>\n\n<script>\nimport login from \"@/views/account/phone/components/code-login.vue\";\n\nimport Footer from \"@/components/account/common/footer.vue\";\nexport default {\n    name: \"AccountCodePhoneLogin\",\n    components: {\n        login,\n\n        Footer,\n    },\n    data() {\n        return {\n            app: \"\",\n        };\n    },\n    computed: {\n        registerLink() {\n            const path = this.$router.resolve({ name: \"phone-register\" });\n            return path.href;\n        },\n        resetPwdLink() {\n            // const path = this.$router.resolve({ name: \"phone-reset-password\" });\n            // return path.href;\n            return \"\";\n        },\n    },\n    mounted() {\n        const search = new URLSearchParams(document.location.search);\n\n        if (search.has(\"app\")) {\n            this.app = search.get(\"app\");\n        } else {\n            this.app = \"miipet\";\n        }\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"@/assets/css/account/common.less\";\n@import \"@/assets/css/account/email/login.less\";\n</style>\n","<!-- 公共组件 手机号验证码登录 -->\n<template>\n    <div class=\"m-card m-login-card\">\n        <card-header :title=\"$t('account.common.login')\">\n            <template #right>\n                <lang-select :lang=\"lang\" />\n            </template>\n        </card-header>\n\n        <div class=\"m-card-main\" v-if=\"!success\">\n            <el-form\n                class=\"m-card-form\"\n                hide-required-asterisk\n                ref=\"loginForm\"\n                label-position=\"top\"\n                :model=\"form\"\n                :rules=\"rules\"\n                size=\"large\"\n            >\n                <el-form-item prop=\"phone\">\n                    <template #label>\n                        <div class=\"m-card-form-label\">\n                            <span>{{ $t(\"account.phone.number\") }}</span>\n                        </div>\n                    </template>\n                    <div class=\"m-card-form-value\">\n                        <phone-code-select v-model=\"phoneCode\" size=\"large\" />\n                        <el-input v-model.trim=\"form.phone\" size=\"large\" tabindex=\"1\"> </el-input>\n                    </div>\n                </el-form-item>\n                <el-form-item prop=\"code\" class=\"u-code\">\n                    <template #label>\n                        <div class=\"m-card-form-label\">\n                            <span>{{ $t(\"account.phone.code\") }}</span>\n                            <span class=\"u-resetpwd\">\n                                <a :href=\"resetPwdLink\">{{ $t(\"account.email.forgetPassword\") }}?</a>\n                            </span>\n                        </div>\n                    </template>\n                    <el-input v-model.trim=\"form.code\" @keydown.enter=\"onLogin\" size=\"large\" tabindex=\"2\"> </el-input>\n                    <el-button\n                        class=\"u-btn-send\"\n                        size=\"small\"\n                        @click=\"senCode\"\n                        :disabled=\"interval > 0 || !phoneChecked\"\n                        >{{ $t(\"account.email.send\") }}<span v-if=\"interval\">({{ interval }}s)</span></el-button\n                    >\n                </el-form-item>\n            </el-form>\n            <el-alert class=\"u-alert\" v-if=\"error\" type=\"error\" show-icon :title=\"error\"></el-alert>\n            <el-button class=\"u-btn u-submit\" type=\"primary\" @click=\"onLogin\" tabindex=\"3\">{{\n                $t(\"account.common.login\")\n            }}</el-button>\n        </div>\n\n        <div class=\"m-card-main\" v-else>\n            <el-alert\n                class=\"m-alert\"\n                :title=\"$t('account.common.loginSuccess')\"\n                type=\"success\"\n                :description=\"$t('account.common.loginSuccessDesc')\"\n                show-icon\n                :closable=\"false\"\n            >\n            </el-alert>\n            <a class=\"el-button u-btn el-button--primary u-skip\" :href=\"redirect\">{{ redirect_button }}</a>\n        </div>\n    </div>\n    <div class=\"m-footer\">\n        <div class=\"m-footer-skip\">\n            {{ $t(\"account.common.noAccount\") }}\n            <a class=\"u-link\" :href=\"registerLink\">{{ $t(\"account.common.registerNow\") }} 👉</a>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { loginByPhoneCode, sendLoginCode } from \"@/service/phone\";\nimport User from \"@iruxu/rx-common/utils/user\";\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\nexport default {\n    name: \"PhoneCodeLogin\",\n    props: {\n        app: {\n            type: String,\n            default: \"\",\n        },\n        registerLink: {\n            type: String,\n            default: \"\",\n        },\n        resetPwdLink: {\n            type: String,\n            default: \"\",\n        },\n    },\n    data() {\n        return {\n            form: {\n                phone: \"\",\n                code: \"\",\n            },\n\n            phoneCode: 86,\n\n            rules: {\n                phone: [\n                    {\n                        required: true,\n                        message: this.$t(\"account.phone.numberPlaceholder\"),\n                        trigger: \"blur\",\n                    },\n                    {\n                        validator: (rule, value, callback) => {\n                            const phone = `+${this.phoneCode}${value}`;\n                            const phoneNumber = parsePhoneNumberFromString(phone);\n                            if (!phoneNumber) {\n                                this.phoneChecked = false;\n                                callback(new Error(this.$t(\"account.phone.numberPlaceholder\")));\n                            }\n                            if (!phoneNumber.isValid()) {\n                                this.phoneChecked = false;\n                                callback(new Error(this.$t(\"account.phone.numberError\")));\n                            } else {\n                                this.phoneChecked = true;\n                                callback();\n                            }\n                        },\n                        trigger: \"blur\",\n                    },\n                ],\n                password: [\n                    {\n                        required: true,\n                        message: this.$t(\"account.phone.codePlaceholder\"),\n                        trigger: \"blur\",\n                    },\n                ],\n            },\n\n            error: \"\",\n            success: false,\n\n            interval: 0,\n            timer: null,\n\n            redirect: \"\",\n            redirect_button: \"\",\n            homepage: \"/\",\n\n            phoneChecked: false,\n        };\n    },\n    computed: {\n        lang() {\n            return User.getLocale();\n        },\n    },\n    mounted() {\n        // 生成特征码\n        User.generateFingerprint();\n\n        this.checkDirect();\n    },\n    methods: {\n        onLogin() {\n            this.error = \"\";\n            this.$refs.loginForm.validate(async (valid) => {\n                if (valid) {\n                    const data = {\n                        phone: `+${this.phoneCode}${this.form.phone}`,\n                        code: this.form.code,\n                    };\n                    loginByPhoneCode(data, { app: this.app })\n                        .then((res) => {\n                            this.$message.success(this.$t(\"account.common.loginSuccess\"));\n                            this.success = true;\n\n                            User.update(res.data.data).then(() => {\n                                this.skip();\n                            });\n                        })\n                        .catch((err) => {\n                            this.success = false;\n                            this.error = err.data?.msg || this.$t(\"account.phone.loginFailedWithPwd\");\n                        });\n                }\n            });\n        },\n        // 发送验证码\n        senCode() {\n            if (!this.form.phone) {\n                return;\n            }\n            const phone = `+${this.phoneCode}${this.form.phone}`;\n            sendLoginCode({ phone: phone }, { app: this.app }).then(() => {\n                this.$message.success(this.$t(\"account.phone.sendSuccess\"));\n                this.interval = 60;\n                this.timer = setInterval(() => {\n                    this.interval--;\n                    if (this.interval <= 0) {\n                        clearInterval(this.timer);\n                    }\n                }, 1000);\n            });\n        },\n        checkDirect() {\n            let search = new URLSearchParams(document.location.search);\n            let redirect = search.get(\"redirect\");\n            if (redirect) {\n                this.redirect = redirect;\n                this.redirect_button = this.$t(\"account.common.jump\");\n            } else {\n                this.redirect = this.homepage;\n                this.redirect_button = this.$t(\"account.common.backToHome\");\n            }\n        },\n        skip() {\n            if (this.redirect) {\n                setTimeout(() => {\n                    location.href = decodeURIComponent(this.redirect);\n                }, 1200);\n            }\n        },\n    },\n};\n</script>\n","import { render } from \"./code-login.vue?vue&type=template&id=17824203\"\nimport script from \"./code-login.vue?vue&type=script&lang=js\"\nexport * from \"./code-login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/i/i/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./code-login.vue?vue&type=template&id=4e2846dc\"\nimport script from \"./code-login.vue?vue&type=script&lang=js\"\nexport * from \"./code-login.vue?vue&type=script&lang=js\"\n\nimport \"./code-login.vue?vue&type=style&index=0&id=4e2846dc&lang=less\"\n\nimport exportComponent from \"/home/runner/work/i/i/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["async","checkPhone","phone","$uc","get","params","then","res","data","isExist","registerByPhone","post","checkPhoneCode","activeByPhone","loginByPhone","sendLoginCode","loginByPhoneCode","class","_createElementBlock","name","props","components","computed","watch","methods","created","mounted","__exports__","render","_createVNode","_component_el_row","justify","_createElementVNode","_component_logo","app","$data","_component_login","registerLink","$options","resetPwdLink","_component_Footer","_component_card_header","title","_ctx","right","_component_lang_select","lang","_component_el_alert","type","description","closable","href","_hoisted_10","_component_el_form","ref","model","rules","size","_component_el_form_item","prop","label","_toDisplayString","_component_phone_code_select","$event","_component_el_input","trim","tabindex","$props","_hoisted_7","code","onKeydown","_component_el_button","onClick","disabled","_hoisted_8","_createBlock","_hoisted_13","String","default","form","phoneCode","required","message","this","$t","trigger","validator","rule","value","callback","phoneNumber","parsePhoneNumberFromString","phoneChecked","Error","isValid","password","error","success","interval","timer","redirect","redirect_button","homepage","User","checkDirect","onLogin","$refs","loginForm","validate","valid","$message","skip","catch","err","msg","senCode","setInterval","clearInterval","search","URLSearchParams","document","location","setTimeout","decodeURIComponent","login","Footer","path","$router","resolve","has"],"sourceRoot":""}