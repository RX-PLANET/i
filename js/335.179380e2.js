"use strict";(self["webpackChunki"]=self["webpackChunki"]||[]).push([[335],{9358:function(e,r,t){t.d(r,{N5:function(){return s},j2:function(){return a},pt:function(){return o}});var n=t(6102);async function o(e){return(0,n.VM)().get("/api/uc/user/account/username/valid",{params:{username:e}}).then((e=>{var r;return null===(r=e.data.data)||void 0===r?void 0:r.isExist}))}function s(e,r){return(0,n.VM)().post("/api/uc/user/account/username/register",e,{params:r})}function a(e,r){return(0,n.VM)({mute:!0}).post("/api/uc/user/account/username/login",e,{params:r})}},1837:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(6252);const o={class:"m-footer"};function s(e,r,t,s,a,c){return(0,n.wg)(),(0,n.iD)("footer",o,"Â© RX-PLANET")}var a={name:"RX-Footer1",props:[],components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},c=t(3744);const i=(0,c.Z)(a,[["render",s]]);var u=i},335:function(e,r,t){t.r(r),t.d(r,{default:function(){return U}});var n=t(6252);const o={class:"p-account p-account-username--login"},s={class:"m-login"};function a(e,r,t,a,c,i){const u=(0,n.up)("logo"),m=(0,n.up)("login",!0),l=(0,n.up)("el-row"),d=(0,n.up)("Footer");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(l,{class:"m-container",justify:"center"},{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n.Wm)(u,{app:c.app},null,8,["app"]),(0,n.Wm)(m,{app:c.app,registerLink:i.registerLink},null,8,["app","registerLink"])])])),_:1}),(0,n.Wm)(d)])}var c=t(3577),i=t(9963);const u={class:"m-card m-login-card"},m={key:0,class:"m-card-main"},l={class:"m-card-form-label"},d={class:"m-card-form-label"},p={key:1,class:"m-card-main"},g=["href"],h={class:"m-footer"},f={class:"m-footer-skip"},w=["href"];function v(e,r,t,o,s,a){const v=(0,n.up)("lang-select"),b=(0,n.up)("card-header"),k=(0,n.up)("el-input"),$=(0,n.up)("el-form-item"),_=(0,n.up)("el-form"),y=(0,n.up)("el-alert"),L=(0,n.up)("el-button");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",u,[(0,n.Wm)(b,{title:e.$t("account.common.login")},{right:(0,n.w5)((()=>[(0,n.Wm)(v,{lang:a.lang},null,8,["lang"])])),_:1},8,["title"]),s.success?((0,n.wg)(),(0,n.iD)("div",p,[(0,n.Wm)(y,{class:"m-alert",title:e.$t("account.common.loginSuccess"),type:"success",description:e.$t("account.common.loginSuccessDesc"),"show-icon":"",closable:!1},null,8,["title","description"]),(0,n._)("a",{class:"u-skip el-button u-btn el-button--primary",href:s.redirect},(0,c.zw)(s.redirect_button),9,g)])):((0,n.wg)(),(0,n.iD)("div",m,[(0,n.Wm)(_,{ref:"loginForm",model:s.form,"label-position":"top",rules:s.rules,size:"large",class:"m-card-form","hide-required-asterisk":""},{default:(0,n.w5)((()=>[(0,n.Wm)($,{prop:"username"},{label:(0,n.w5)((()=>[(0,n._)("div",l,[(0,n._)("span",null,(0,c.zw)(e.$t("account.username.name")),1)])])),default:(0,n.w5)((()=>[(0,n.Wm)(k,{modelValue:s.form.username,"onUpdate:modelValue":r[0]||(r[0]=e=>s.form.username=e),modelModifiers:{trim:!0},size:"large"},null,8,["modelValue"])])),_:1}),(0,n.Wm)($,{prop:"password"},{label:(0,n.w5)((()=>[(0,n._)("div",d,[(0,n._)("span",null,(0,c.zw)(e.$t("account.common.password")),1)])])),default:(0,n.w5)((()=>[(0,n.Wm)(k,{modelValue:s.form.password,"onUpdate:modelValue":r[1]||(r[1]=e=>s.form.password=e),modelModifiers:{trim:!0},onKeydown:(0,i.D2)(a.onLogin,["enter"]),type:"password",size:"large","show-password":""},null,8,["modelValue","onKeydown"])])),_:1})])),_:1},8,["model","rules"]),s.error?((0,n.wg)(),(0,n.j4)(y,{key:0,class:"u-alert",type:"error","show-icon":"",title:s.error},null,8,["title"])):(0,n.kq)("",!0),(0,n.Wm)(L,{class:"u-btn u-submit",type:"primary",onClick:a.onLogin,disabled:!a.canSubmit},{default:(0,n.w5)((()=>[(0,n.Uk)((0,c.zw)(e.$t("account.common.login")),1)])),_:1},8,["onClick","disabled"])]))]),(0,n._)("div",h,[(0,n._)("div",f,[(0,n.Uk)((0,c.zw)(e.$t("account.common.noAccount"))+" ",1),(0,n._)("a",{class:"u-link",href:a.registerLink},(0,c.zw)(e.$t("account.common.registerNow"))+" ðŸ‘‰",9,w)])])],64)}var b=t(9358),k=t(9158),$={name:"UsernameLogin",props:{app:{type:String,default:""}},data(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:this.$t("account.username.namePlaceholder"),trigger:"blur"},{min:3,max:20,message:this.$t("account.username.nameError"),trigger:"blur"}],password:[{required:!0,message:this.$t("account.common.passwordPlaceholder"),trigger:"blur"},{min:6,max:30,message:this.$t("account.common.passwordError"),trigger:"blur"}]},error:"",success:!1,redirect:"",redirect_button:"è·³è½¬",homepage:"/"}},computed:{canSubmit(){return this.form.username&&this.form.password},registerLink(){const e=this.$router.resolve({name:"username-register",query:{app:this.app}});return e.href},lang(){return k.Z.getLocale()}},mounted(){k.Z.generateFingerprint(),this.checkDirect()},methods:{onLogin(){this.error="",this.$refs.loginForm.validate((async e=>{e&&(0,b.j2)(this.form,{app:this.app}).then((e=>{this.$message.success(this.$t("account.common.loginSuccess")),this.success=!0,k.Z.update(e.data.data).then((()=>{this.skip()}))})).catch((e=>{var r;this.success=!1,this.error=(null===(r=e.data)||void 0===r?void 0:r.msg)||this.$t("account.username.loginFailed")}))}))},checkDirect(){let e=new URLSearchParams(document.location.search),r=e.get("redirect");r?(this.redirect=r,this.redirect_button=this.$t("account.common.jump")):(this.redirect=this.homepage,this.redirect_button=this.$t("account.common.backToHome"))},skip(){this.redirect&&setTimeout((()=>{location.href=decodeURIComponent(this.redirect)}),1200)}}},_=t(3744);const y=(0,_.Z)($,[["render",v]]);var L=y,W=t(1837),z={name:"AccountUsernameLogin",components:{login:L,Footer:W.Z},data(){return{app:""}},computed:{registerLink(){const e=this.$router.resolve({name:"username-register"});return e.href}},mounted(){const e=new URLSearchParams(document.location.search);e.has("app")?this.app=e.get("app"):this.app="miipet"}};const D=(0,_.Z)(z,[["render",a]]);var U=D}}]);
//# sourceMappingURL=335.179380e2.js.map