"use strict";(self["webpackChunki"]=self["webpackChunki"]||[]).push([[740],{2208:function(e,t,o){o.d(t,{CD:function(){return s},Cs:function(){return i},Je:function(){return l},UP:function(){return u},aH:function(){return r},fD:function(){return c},tW:function(){return a}});var n=o(6102);async function r(e){return(0,n.VM)().get("/api/uc/user/account/phone/valid",{params:{phone:e}}).then((e=>{var t;return null===(t=e.data.data)||void 0===t?void 0:t.isExist}))}function s(e,t){return(0,n.VM)().post("/api/uc/user/account/phone/register",e,{params:t})}async function a(e){return(0,n.VM)().get("/api/uc/user/account/phone/check-code",{params:e})}function c(e,t){return(0,n.VM)().post("/api/uc/user/account/phone/active",e,{params:t})}function i(e,t){return(0,n.VM)().post("/api/uc/user/account/phone/login",e,{params:t})}function u(e,t){return(0,n.VM)().post("/api/uc/user/account/phone/login/code-send",e,{params:t})}function l(e,t){return(0,n.VM)().post("/api/uc/user/account/phone/login/code-verify",e,{params:t})}},1837:function(e,t,o){o.d(t,{Z:function(){return u}});var n=o(6252);const r={class:"m-footer"};function s(e,t,o,s,a,c){return(0,n.wg)(),(0,n.iD)("footer",r,"Â© RX-PLANET")}var a={name:"RX-Footer1",props:[],components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},c=o(3744);const i=(0,c.Z)(a,[["render",s]]);var u=i},8740:function(e,t,o){o.r(t),o.d(t,{default:function(){return S}});var n=o(6252);const r={class:"p-account p-account-phone--login"},s={class:"m-login"};function a(e,t,o,a,c,i){const u=(0,n.up)("logo"),l=(0,n.up)("login",!0),p=(0,n.up)("el-row"),d=(0,n.up)("Footer");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(p,{class:"m-container",justify:"center"},{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n.Wm)(u,{app:c.app},null,8,["app"]),(0,n.Wm)(l,{app:c.app,registerLink:i.registerLink,resetPwdLink:i.resetPwdLink},null,8,["app","registerLink","resetPwdLink"])])])),_:1}),(0,n.Wm)(d)])}var c=o(3577),i=o(9963);const u={class:"m-card m-login-card"},l={key:0,class:"m-card-main"},p={class:"m-card-form-label"},d={class:"m-card-form-value"},m={class:"m-card-form-label"},h={class:"u-resetpwd"},g=["href"],f={key:1,class:"m-card-main"},w=["href"],k={class:"m-footer"},v={class:"m-footer-skip"},b=["href"];function $(e,t,o,r,s,a){const $=(0,n.up)("lang-select"),_=(0,n.up)("card-header"),L=(0,n.up)("phone-code-select"),y=(0,n.up)("el-input"),P=(0,n.up)("el-form-item"),V=(0,n.up)("el-form"),C=(0,n.up)("el-alert"),W=(0,n.up)("el-button");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",u,[(0,n.Wm)(_,{title:e.$t("account.common.login")},{right:(0,n.w5)((()=>[(0,n.Wm)($,{lang:a.lang},null,8,["lang"])])),_:1},8,["title"]),s.success?((0,n.wg)(),(0,n.iD)("div",f,[(0,n.Wm)(C,{class:"m-alert",title:e.$t("account.common.loginSuccess"),type:"success",description:e.$t("account.common.loginSuccessDesc"),"show-icon":"",closable:!1},null,8,["title","description"]),(0,n._)("a",{class:"el-button u-btn el-button--primary u-skip",href:s.redirect},(0,c.zw)(s.redirect_button),9,w)])):((0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(V,{class:"m-card-form","hide-required-asterisk":"",ref:"loginForm","label-position":"top",model:s.form,rules:s.rules,size:"large"},{default:(0,n.w5)((()=>[(0,n.Wm)(P,{prop:"phone"},{label:(0,n.w5)((()=>[(0,n._)("div",p,[(0,n._)("span",null,(0,c.zw)(e.$t("account.phone.number")),1)])])),default:(0,n.w5)((()=>[(0,n._)("div",d,[(0,n.Wm)(L,{modelValue:s.phoneCode,"onUpdate:modelValue":t[0]||(t[0]=e=>s.phoneCode=e),size:"large"},null,8,["modelValue"]),(0,n.Wm)(y,{class:"u-phone-input",modelValue:s.form.phone,"onUpdate:modelValue":t[1]||(t[1]=e=>s.form.phone=e),modelModifiers:{trim:!0},size:"large",tabindex:"1"},null,8,["modelValue"])])])),_:1}),(0,n.Wm)(P,{prop:"password"},{label:(0,n.w5)((()=>[(0,n._)("div",m,[(0,n._)("span",null,(0,c.zw)(e.$t("account.common.password")),1),(0,n._)("span",h,[(0,n._)("a",{href:o.resetPwdLink},(0,c.zw)(e.$t("account.email.forgetPassword"))+"?",9,g)])])])),default:(0,n.w5)((()=>[(0,n.Wm)(y,{modelValue:s.form.password,"onUpdate:modelValue":t[2]||(t[2]=e=>s.form.password=e),modelModifiers:{trim:!0},onKeydown:(0,i.D2)(a.onLogin,["enter"]),type:"password",size:"large","show-password":"",tabindex:"2"},null,8,["modelValue","onKeydown"])])),_:1})])),_:1},8,["model","rules"]),s.error?((0,n.wg)(),(0,n.j4)(C,{key:0,class:"u-alert",type:"error","show-icon":"",title:s.error},null,8,["title"])):(0,n.kq)("",!0),(0,n.Wm)(W,{class:"u-btn u-submit",type:"primary",onClick:a.onLogin,tabindex:"3"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,c.zw)(e.$t("account.common.login")),1)])),_:1},8,["onClick"])]))]),(0,n._)("div",k,[(0,n._)("div",v,[(0,n.Uk)((0,c.zw)(e.$t("account.common.noAccount"))+" ",1),(0,n._)("a",{class:"u-link",href:o.registerLink},(0,c.zw)(e.$t("account.common.registerNow"))+" ðŸ‘‰",9,b)])])],64)}var _=o(2208),L=o(9158),y=o(9709),P={name:"PhoneLogin",props:{app:{type:String,default:""},registerLink:{type:String,default:""},resetPwdLink:{type:String,default:""}},data(){return{form:{email:"",password:""},phoneCode:86,rules:{phone:[{required:!0,message:this.$t("account.phone.numberPlaceholder"),trigger:"blur"},{validator:(e,t,o)=>{const n=`+${this.phoneCode}${t}`,r=(0,y.S)(n);r||(this.phoneChecked=!1,o(new Error(this.$t("account.phone.numberPlaceholder")))),r.isValid()?(this.phoneChecked=!0,o()):(this.phoneChecked=!1,o(new Error(this.$t("account.phone.numberError"))))},trigger:"blur"}],password:[{required:!0,message:this.$t("account.common.passwordPlaceholder"),trigger:"blur"},{min:6,max:30,message:this.$t("account.common.passwordError"),trigger:"blur"}]},error:"",success:!1,redirect:"",redirect_button:"",homepage:"/"}},computed:{lang(){return L.Z.getLocale()}},mounted(){L.Z.generateFingerprint(),this.checkDirect()},methods:{onLogin(){this.error="",this.$refs.loginForm.validate((async e=>{if(e){const e={phone:`+${this.phoneCode}${this.form.phone}`,password:this.form.password};(0,_.Cs)(e,{app:this.app}).then((e=>{this.$message.success(this.$t("account.common.loginSuccess")),this.success=!0,L.Z.update(e.data.data).then((()=>{this.skip()}))})).catch((e=>{var t;this.success=!1,this.error=(null===(t=e.data)||void 0===t?void 0:t.msg)||this.$t("account.phone.loginFailedWithPwd")}))}}))},checkDirect(){let e=new URLSearchParams(document.location.search),t=e.get("redirect");t?(this.redirect=t,this.redirect_button=this.$t("account.common.jump")):(this.redirect=this.homepage,this.redirect_button=this.$t("account.common.backToHome"))},skip(){this.redirect&&setTimeout((()=>{location.href=decodeURIComponent(this.redirect)}),1200)}}},V=o(3744);const C=(0,V.Z)(P,[["render",$]]);var W=C,z=o(1837),D={name:"AccountPhoneLogin",components:{login:W,Footer:z.Z},data(){return{app:""}},computed:{registerLink(){const e=this.$router.resolve({name:"phone-register"});return e.href},resetPwdLink(){const e=this.$router.resolve({name:"phone-reset-password"});return e.href}},mounted(){const e=new URLSearchParams(document.location.search);e.has("app")?this.app=e.get("app"):this.app="miipet"}};const M=(0,V.Z)(D,[["render",a]]);var S=M}}]);
//# sourceMappingURL=740.14c69ffa.js.map