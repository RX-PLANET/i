"use strict";(self["webpackChunki"]=self["webpackChunki"]||[]).push([[91],{650:function(e,s,t){t.d(s,{Z:function(){return n}});var a=t(6252);const r={class:"m-footer"};function o(e,s,t,o,l,i){return(0,a.wg)(),(0,a.iD)("footer",r,"© RX-PLANET")}var l={name:"RX-Footer",props:[],components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},i=t(3744);const c=(0,i.Z)(l,[["render",o]]);var n=c},4091:function(e,s,t){t.r(s),t.d(s,{default:function(){return z}});var a=t(6252),r=t(3577);const o={class:"p-account p-reset-password"},l={class:"m-reset-password"},i={class:"m-card"},c={key:0,class:"m-card-main"},n={key:0,class:"u-tips"},m={class:"m-card-form-label"},d={class:"m-reset-password__email"},u={class:"m-card-form-label"},p={class:"m-card-form-label"},w={class:"m-card-form-label"},h={key:1,class:"m-card-main"},f=["href"],g={class:"m-footer"},k={class:"m-footer-skip"},b=["href"];function v(e,s,t,v,$,_){const y=(0,a.up)("logo"),P=(0,a.up)("card-header"),W=(0,a.up)("el-input"),z=(0,a.up)("el-button"),q=(0,a.up)("el-form-item"),V=(0,a.up)("el-form"),D=(0,a.up)("el-alert"),U=(0,a.up)("el-row"),C=(0,a.up)("Footer");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(U,{class:"m-container",justify:"center"},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a.Wm)(y,{app:$.app},null,8,["app"]),(0,a._)("div",i,[(0,a.Wm)(P,{title:e.$t("account.email.resetPassword")},null,8,["title"]),3!=$.step?((0,a.wg)(),(0,a.iD)("div",c,[(0,a.Wm)(V,{class:"m-card-form",model:$.form,ref:"resetForm","label-position":"top","hide-required-asterisk":"",rules:$.rules,size:"large"},{default:(0,a.w5)((()=>[0==$.step?((0,a.wg)(),(0,a.iD)("p",n,"🌟 "+(0,r.zw)(e.$t("account.email.findPassword")),1)):(0,a.kq)("",!0),(0,a.Wm)(q,{prop:"email"},{label:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a._)("span",null,(0,r.zw)(e.$t("account.email.address")),1)])])),default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a.Wm)(W,{modelValue:$.form.email,"onUpdate:modelValue":s[0]||(s[0]=e=>$.form.email=e),modelModifiers:{trim:!0},disabled:0!=$.step,size:"large",placeholder:"yourname@example.com"},null,8,["modelValue","disabled"]),$.sent?((0,a.wg)(),(0,a.j4)(z,{key:0,class:"u-btn",type:"primary",plain:"",onClick:_.resetPwd},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.$t("account.email.resend"))+" ",1),$.interval?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[s[4]||(s[4]=(0,a.Uk)("(")),(0,a._)("span",null,(0,r.zw)($.interval)+"s",1),s[5]||(s[5]=(0,a.Uk)(") "))],64)):(0,a.kq)("",!0)])),_:1},8,["onClick"])):(0,a.kq)("",!0)])])),_:1}),1==$.step?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Wm)(q,{prop:"code"},{label:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a._)("span",null,(0,r.zw)(e.$t("account.email.code")),1)])])),default:(0,a.w5)((()=>[(0,a.Wm)(W,{modelValue:$.form.code,"onUpdate:modelValue":s[1]||(s[1]=e=>$.form.code=e),modelModifiers:{trim:!0},size:"large",placeholder:e.$t("account.email.code")},null,8,["modelValue","placeholder"])])),_:1}),(0,a.Wm)(q,{prop:"password1"},{label:(0,a.w5)((()=>[(0,a._)("div",p,[(0,a._)("span",null,(0,r.zw)(e.$t("account.email.newPassword")),1)])])),default:(0,a.w5)((()=>[(0,a.Wm)(W,{modelValue:$.form.password1,"onUpdate:modelValue":s[2]||(s[2]=e=>$.form.password1=e),modelModifiers:{trim:!0},type:"password",size:"large","show-password":"",placeholder:e.$t("account.email.newPassword")},null,8,["modelValue","placeholder"])])),_:1}),(0,a.Wm)(q,{prop:"password2"},{label:(0,a.w5)((()=>[(0,a._)("div",w,[(0,a._)("span",null,(0,r.zw)(e.$t("account.email.confirmPassword")),1)])])),default:(0,a.w5)((()=>[(0,a.Wm)(W,{modelValue:$.form.password2,"onUpdate:modelValue":s[3]||(s[3]=e=>$.form.password2=e),modelModifiers:{trim:!0},type:"password",size:"large","show-password":"",placeholder:e.$t("account.email.confirmPassword")},null,8,["modelValue","placeholder"])])),_:1})],64)):(0,a.kq)("",!0),(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(z,{class:"u-button u-submit",type:"primary",onClick:_.onNextStep},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.$t("account.email.next")),1)])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])):(0,a.kq)("",!0),3==$.step?((0,a.wg)(),(0,a.iD)("main",h,[(0,a.Wm)(D,{class:"m-alert",title:e.$t("account.email.resetSuccess"),type:"success",description:e.$t("account.email.resetSuccessDesc"),"show-icon":"",closable:!1},null,8,["title","description"]),(0,a._)("a",{class:"u-skip el-button u-btn el-button--primary",href:_.loginLink},(0,r.zw)(e.$t("account.common.login")),9,f)])):(0,a.kq)("",!0)]),(0,a._)("div",g,[(0,a._)("div",k,[(0,a._)("a",{class:"u-link",href:_.loginLink},"← "+(0,r.zw)(e.$t("account.common.back")+e.$t("account.common.login")),9,b)])])])])),_:1}),(0,a.Wm)(C)])}var $=t(2878),_=t(650),y={name:"ResetPassword",components:{Footer:_.Z},data(){return{form:{email:""},rules:{email:[{required:!0,message:this.$t("account.email.addressPlaceholder"),trigger:"blur"},{type:"email",message:this.$t("account.email.addressError"),trigger:"blur"},{validator:this.check,trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{pattern:/^[0-9A-Z]+$/,message:"验证码格式错误",trigger:"blur"}],password1:[{required:!0,message:this.$t("account.common.passwordPlaceholder"),trigger:"blur"},{min:6,max:30,message:this.$t("account.common.passwordError"),trigger:"blur"}],password2:[{required:!0,message:this.$t("account.common.password2Placeholder"),trigger:"blur"},{min:6,max:30,message:this.$t("account.common.passwordError"),trigger:"blur"},{validator:(e,s,t)=>{s!==this.form.password1?t(new Error(this.$t("account.common.passwordError2"))):t()},trigger:"blur"}]},timer:null,interval:0,app:"",sent:!1,step:0}},computed:{loginLink(){const e=this.$router.resolve({name:"email-login",query:{app:this.app}});return e.href}},mounted(){const e=new URLSearchParams(location.search);this.app=e.get("app")||"miipet",this.timer&&(clearInterval(this.timer),this.timer=null,this.interval=10)},methods:{async check(e,s,t){if(s){const e=await(0,$.oP)(s);e||t(new Error("邮箱地址不存在")),t()}else t(new Error("请输入邮箱地址"))},onNextStep(){0==this.step&&this.sendCode(),1==this.step&&this.resetPwd()},sendCode(){this.$refs.resetForm.validate((async e=>{e&&(0,$.LI)({email:this.form.email},{app:this.app}).then((()=>{this.$message.success(this.$t("account.email.sendResetSuccess")),this.sent=!0,this.step=1,this.interval=10,this.timer=setInterval((()=>{this.interval--,this.interval<=0&&(clearInterval(this.timer),this.timer=null)}),1e3)}))}))},resetPwd(){this.$refs.resetForm.validate((async e=>{if(e){const e={email:this.form.email,code:this.form.code,password:this.form.password1};(0,$.c0)(e,{app:this.app}).then((()=>{this.$message.success(this.$t("account.email.resetSuccessDesc")),this.step=3}))}}))}}},P=t(3744);const W=(0,P.Z)(y,[["render",v]]);var z=W}}]);
//# sourceMappingURL=91.c561e912.js.map