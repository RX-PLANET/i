"use strict";(self["webpackChunki"]=self["webpackChunki"]||[]).push([[517],{1837:function(e,o,s){s.d(o,{Z:function(){return c}});var r=s(6252);const a={class:"m-footer"};function t(e,o,s,t,n,l){return(0,r.wg)(),(0,r.iD)("footer",a,"© RX-PLANET")}var n={name:"RX-Footer1",props:[],components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},l=s(3744);const i=(0,l.Z)(n,[["render",t]]);var c=i},517:function(e,o,s){s.r(o),s.d(o,{default:function(){return q}});var r=s(6252);const a={class:"p-account p-account-email p-account-email--register"},t={class:"m-register"};function n(e,o,s,n,l,i){const c=(0,r.up)("logo"),d=(0,r.up)("resetPassword",!0),m=(0,r.up)("el-row"),u=(0,r.up)("Footer");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r.Wm)(m,{class:"m-container",justify:"center"},{default:(0,r.w5)((()=>[(0,r._)("div",t,[(0,r.Wm)(c,{app:l.app},null,8,["app"]),(0,r.Wm)(d,{app:l.app,loginLink:i.loginLink},null,8,["app","loginLink"])])])),_:1}),(0,r.Wm)(u)])}var l=s(3577);const i={class:"m-card m-register-card"},c={key:0,class:"m-card-main"},d={class:"m-card-form-label"},m={class:"m-card-form-value"},u={class:"m-card-form-label"},p={key:0},h={class:"m-card-form-label"},f={class:"m-card-form-label"},w={key:1,class:"m-card-main"},g={class:"m-footer"},k={class:"m-footer-skip"},b=["href"];function v(e,o,s,a,t,n){const v=(0,r.up)("lang-select"),$=(0,r.up)("card-header"),_=(0,r.up)("phone-code-select"),C=(0,r.up)("el-input"),W=(0,r.up)("el-form-item"),z=(0,r.up)("el-button"),V=(0,r.up)("el-form"),P=(0,r.up)("el-alert");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",i,[(0,r.Wm)($,{title:e.$t("account.phone.resetPassword")},{right:(0,r.w5)((()=>[(0,r.Wm)(v,{lang:t.form.lang,onChange:n.changeLang},null,8,["lang","onChange"])])),_:1},8,["title"]),null===t.success?((0,r.wg)(),(0,r.iD)("div",c,[(0,r.Wm)(V,{class:"m-card-form","hide-required-asterisk":"",ref:"registerForm",model:t.form,rules:t.rules,size:"large","status-icon":"","label-position":"top"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{prop:"phone"},{label:(0,r.w5)((()=>[(0,r._)("div",d,[(0,r._)("span",null,[(0,r.Uk)((0,l.zw)(e.$t("account.phone.number")),1),o[5]||(o[5]=(0,r._)("i",{class:"is-required"},"*",-1))])])])),default:(0,r.w5)((()=>[(0,r._)("div",m,[(0,r.Wm)(_,{modelValue:t.phoneCode,"onUpdate:modelValue":o[0]||(o[0]=e=>t.phoneCode=e),size:"large"},null,8,["modelValue"]),(0,r.Wm)(C,{modelValue:t.form.phone,"onUpdate:modelValue":o[1]||(o[1]=e=>t.form.phone=e),modelModifiers:{trim:!0},size:"large"},null,8,["modelValue"])])])),_:1}),(0,r.Wm)(W,{prop:"code",class:"u-code"},{label:(0,r.w5)((()=>[(0,r._)("div",u,[(0,r._)("span",null,[(0,r.Uk)((0,l.zw)(e.$t("account.phone.code")),1),o[6]||(o[6]=(0,r._)("i",{class:"is-required"},"*",-1))])])])),default:(0,r.w5)((()=>[(0,r.Wm)(C,{modelValue:t.form.code,"onUpdate:modelValue":o[2]||(o[2]=e=>t.form.code=e),modelModifiers:{trim:!0},size:"large"},null,8,["modelValue"]),(0,r.Wm)(z,{class:"u-btn-send",size:"small",onClick:n.senCode,disabled:t.interval>0||!t.phoneChecked||!t.form.phone},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.$t("account.phone.send")),1),t.interval?((0,r.wg)(),(0,r.iD)("span",p,"("+(0,l.zw)(t.interval)+"s)",1)):(0,r.kq)("",!0)])),_:1},8,["onClick","disabled"])])),_:1}),(0,r.Wm)(W,{prop:"password",class:"m-password"},{label:(0,r.w5)((()=>[(0,r._)("div",h,[(0,r._)("span",null,[(0,r.Uk)((0,l.zw)(e.$t("account.common.password")),1),o[7]||(o[7]=(0,r._)("i",{class:"is-required"},"*",-1))])])])),default:(0,r.w5)((()=>[(0,r.Wm)(C,{modelValue:t.form.password,"onUpdate:modelValue":o[3]||(o[3]=e=>t.form.password=e),modelModifiers:{trim:!0},type:"password",size:"large","show-password":""},null,8,["modelValue"])])),_:1}),(0,r.Wm)(W,{prop:"password1",class:"m-password"},{label:(0,r.w5)((()=>[(0,r._)("div",f,[(0,r._)("span",null,[(0,r.Uk)((0,l.zw)(e.$t("account.common.passwordConfirm")),1),o[8]||(o[8]=(0,r._)("i",{class:"is-required"},"*",-1))])])])),default:(0,r.w5)((()=>[(0,r.Wm)(C,{modelValue:t.form.password1,"onUpdate:modelValue":o[4]||(o[4]=e=>t.form.password1=e),modelModifiers:{trim:!0},type:"password",size:"large","show-password":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),(0,r.Wm)(z,{class:"u-btn u-submit u-reset-submit",type:"primary",disabled:n.canReset,onClick:n.onResetPassword},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.$t("account.phone.resetPassword")),1)])),_:1},8,["disabled","onClick"])])):(0,r.kq)("",!0),1==t.success?((0,r.wg)(),(0,r.iD)("main",w,[(0,r.Wm)(P,{class:"m-alert",title:e.$t("account.phone.resetSuccess"),type:"success",description:e.$t("account.phone.resetSuccessDesc"),"show-icon":"",closable:!1},null,8,["title","description"]),(0,r.Wm)(z,{size:"large",class:"u-btn u-back",type:"primary",onClick:n.goLogin},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.$t("account.common.login")),1)])),_:1},8,["onClick"])])):(0,r.kq)("",!0)]),(0,r._)("div",g,[(0,r._)("div",k,[(0,r._)("a",{class:"u-link",href:s.loginLink},"← "+(0,l.zw)(e.$t("account.common.back")+e.$t("account.common.login")),9,b)])])],64)}var $=s(2878),_=s(9158),C=s(9709),W={name:"PhoneResetPassword",props:{app:{type:String,default:""},loginLink:{type:String,default:""}},data(){return{form:{phone:"",password:"",password1:"",lang:"",code:""},phoneCode:86,rules:{phone:[{required:!0,message:this.$t("account.phone.numberPlaceholder"),trigger:"blur"},{validator:(e,o,s)=>{const r=`+${this.phoneCode}${o}`,a=(0,C.S)(r);a&&a.isValid()?(this.phoneChecked=!0,s()):s(new Error(this.$t("account.phone.numberError")))},trigger:"blur"}],password:[{required:!0,message:this.$t("account.common.passwordPlaceholder"),trigger:"blur"},{min:6,max:30,message:this.$t("account.common.passwordError"),trigger:"blur"}],password1:[{required:!0,message:this.$t("account.common.password2Placeholder"),trigger:"blur"},{min:6,max:30,message:this.$t("account.common.passwordError"),trigger:"blur"},{validator:(e,o,s)=>{o!==this.form.password?s(new Error(this.$t("account.common.passwordError2"))):s()},trigger:"blur"}]},success:null,phoneChecked:!1,terms:"/document/terms",interval:0,timer:null}},computed:{canReset(){return!this.form.phone||!this.form.code||!this.form.password||!this.form.password1||!this.phoneChecked}},mounted(){_.Z.generateFingerprint(),this.form.lang=_.Z.getLocale()},methods:{senCode(){if(!this.form.phone)return;const e=`+${this.phoneCode}${this.form.phone}`;(0,$.Z3)({phone:e},{app:this.app}).then((()=>{this.$message.success(this.$t("account.phone.sendSuccess")),this.interval=60,this.timer=setInterval((()=>{this.interval--,this.interval<=0&&clearInterval(this.timer)}),1e3)}))},onResetPassword(){this.$refs.registerForm.validate((async e=>{if(e){const e=`+${this.phoneCode}${this.form.phone}`;(0,$.tW)({phone:e,code:this.form.code}).then((()=>{const o={phone:e,password:this.form.password,code:this.form.code};(0,$.QB)(o,{app:this.app}).then((()=>{this.success=!0})).catch((()=>{this.success=!1}))}))}}))},goLogin(){location.href=this.loginLink},onBack(){this.success=null},changeLang(e){this.form.lang=e}}},z=s(3744);const V=(0,z.Z)(W,[["render",v]]);var P=V,y=s(1837),L={name:"AccountPhoneResetPassword",components:{resetPassword:P,Footer:y.Z},data(){return{app:""}},computed:{loginLink(){const e=this.$router.resolve({name:"phone-login"});return e.href}},mounted(){const e=new URLSearchParams(document.location.search);e.has("app")?this.app=e.get("app"):this.app="miipet"}};const U=(0,z.Z)(L,[["render",n]]);var q=U}}]);
//# sourceMappingURL=517.f03b59f6.js.map