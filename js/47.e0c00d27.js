"use strict";(self["webpackChunki"]=self["webpackChunki"]||[]).push([[47],{8026:function(e,t,n){n.d(t,{FP:function(){return i},Iq:function(){return s},oP:function(){return o},pI:function(){return a}});var r=n(6102);async function o(e){return(0,r.VM)().get("/api/uc/user/account/email/valid",{params:{email:e}}).then((e=>{var t;return null===(t=e.data.data)||void 0===t?void 0:t.isExist}))}function a(e,t){return(0,r.VM)().post("/api/uc/user/account/email/register",e,{params:t})}function i(e,t){return(0,r.VM)({mute:!0}).post("/api/uc/user/account/email/active",e,{params:t})}function s(e,t){return(0,r.VM)({mute:!0}).post("/api/uc/user/account/email/login",e,{params:t})}},650:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(6252);const o={class:"m-footer"};function a(e,t,n,a,i,s){return(0,r.wg)(),(0,r.iD)("footer",o,"Â© RX-PLANET")}var i={name:"RX-Footer",props:[],components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},s=n(3744);const c=(0,s.Z)(i,[["render",a]]);var u=c},5839:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(6252),o=n.p+"img/wechat.2b3ccab9.svg";const a={key:0,class:"m-account-union"},i={class:"m-account-union__header"},s={class:"m-account-union__content"},c=["href"];function u(e,t,n,u,l,m){const d=(0,r.up)("Star"),p=(0,r.up)("el-icon");return n.includes.length?((0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",i,[(0,r._)("span",null,[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d)])),_:1})])]),(0,r._)("div",s,[n.includes.includes("wechat")?((0,r.wg)(),(0,r.iD)("a",{key:0,class:"m-account-union__item m-account-union__item--wechat",href:m.getUnionLink("/user/union/wesite/")},t[0]||(t[0]=[(0,r._)("img",{class:"u-icon",src:o},null,-1),(0,r._)("span",{class:"u-label"},"å¾®ä¿¡",-1)]),8,c)):(0,r.kq)("",!0)])])):(0,r.kq)("",!0)}var l=n(9158),m=n(1814),d={name:"AccountUnion",props:{mode:{type:String,default:"login"},includes:{type:Array,default:()=>[]}},components:{},data:function(){return{uc:m.v+"/api/uc"}},computed:{app(){return this.$store.state.app},lang(){return l.Z.getLocale()},unionLinkSuffix(){return"?app="+this.app+"&lang="+this.lang}},watch:{},methods:{getUnionLink(e){return this.uc+e+this.mode+this.unionLinkSuffix}},created:function(){},mounted:function(){}},p=n(3744);const g=(0,p.Z)(d,[["render",u]]);var h=g},2102:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var r=n(6252);const o={class:"p-account p-account-email--login"},a={class:"m-login"};function i(e,t,n,i,s,c){const u=(0,r.up)("logo"),l=(0,r.up)("login",!0),m=(0,r.up)("el-row"),d=(0,r.up)("Footer");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(m,{class:"m-container",justify:"center"},{default:(0,r.w5)((()=>[(0,r._)("div",a,[(0,r.Wm)(u,{app:s.app},null,8,["app"]),(0,r.Wm)(l,{app:s.app,registerLink:c.registerLink,resetPwdLink:c.resetPwdLink},null,8,["app","registerLink","resetPwdLink"])])])),_:1}),(0,r.Wm)(d)])}var s=n(3577),c=n(9963);const u={class:"m-card m-login-card"},l={key:0,class:"m-card-main"},m={class:"m-card-form-label"},d={class:"m-card-form-label"},p={class:"u-resetpwd"},g=["href"],h={key:1,class:"m-card-main"},f=["href"],w={class:"m-footer"},k={class:"m-footer-skip"},v=["href"];function _(e,t,n,o,a,i){const _=(0,r.up)("lang-select"),b=(0,r.up)("card-header"),L=(0,r.up)("el-input"),y=(0,r.up)("el-form-item"),$=(0,r.up)("el-form"),S=(0,r.up)("el-alert"),W=(0,r.up)("el-button"),P=(0,r.up)("union");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",u,[(0,r.Wm)(b,{title:e.$t("account.common.login")},{right:(0,r.w5)((()=>[(0,r.Wm)(_,{lang:i.lang},null,8,["lang"])])),_:1},8,["title"]),a.success?((0,r.wg)(),(0,r.iD)("div",h,[(0,r.Wm)(S,{class:"m-alert",title:e.$t("account.common.loginSuccess"),type:"success",description:e.$t("account.common.loginSuccessDesc"),"show-icon":"",closable:!1},null,8,["title","description"]),(0,r._)("a",{class:"el-button u-btn el-button--primary u-skip",href:a.redirect},(0,s.zw)(a.redirect_button),9,f)])):((0,r.wg)(),(0,r.iD)("div",l,[(0,r.Wm)($,{class:"m-card-form","hide-required-asterisk":"",ref:"loginForm","label-position":"top",model:a.form,rules:a.rules,size:"large"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{prop:"email"},{label:(0,r.w5)((()=>[(0,r._)("div",m,[(0,r._)("span",null,(0,s.zw)(e.$t("account.email.address")),1)])])),default:(0,r.w5)((()=>[(0,r.Wm)(L,{modelValue:a.form.email,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.email=e),modelModifiers:{trim:!0},size:"large",tabindex:"1"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(y,{prop:"password"},{label:(0,r.w5)((()=>[(0,r._)("div",d,[(0,r._)("span",null,(0,s.zw)(e.$t("account.common.password")),1),(0,r._)("span",p,[(0,r._)("a",{href:n.resetPwdLink},(0,s.zw)(e.$t("account.email.forgetPassword"))+"?",9,g)])])])),default:(0,r.w5)((()=>[(0,r.Wm)(L,{modelValue:a.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.password=e),modelModifiers:{trim:!0},onKeydown:(0,c.D2)(i.onLogin,["enter"]),type:"password",size:"large","show-password":"",tabindex:"2"},null,8,["modelValue","onKeydown"])])),_:1})])),_:1},8,["model","rules"]),a.error?((0,r.wg)(),(0,r.j4)(S,{key:0,class:"u-alert",type:"error","show-icon":"",title:a.error},null,8,["title"])):(0,r.kq)("",!0),(0,r.Wm)(W,{class:"u-btn u-submit",type:"primary",onClick:i.onLogin,tabindex:"3"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.$t("account.common.login")),1)])),_:1},8,["onClick"]),(0,r.Wm)(P,{mode:"login",includes:["wechat"]})]))]),(0,r._)("div",w,[(0,r._)("div",k,[(0,r.Uk)((0,s.zw)(e.$t("account.common.noAccount"))+" ",1),(0,r._)("a",{class:"u-link",href:n.registerLink},(0,s.zw)(e.$t("account.common.registerNow"))+" ðŸ‘‰",9,v)])])],64)}var b=n(8026),L=n(9158),y=n(5839),$={name:"EmailLogin",components:{union:y.Z},props:{app:{type:String,default:""},registerLink:{type:String,default:""},resetPwdLink:{type:String,default:""}},data(){return{form:{email:"",password:""},rules:{email:[{required:!0,message:this.$t("account.email.addressPlaceholder"),trigger:"blur"},{type:"email",message:this.$t("account.email.addressError"),trigger:["blur"]}],password:[{required:!0,message:this.$t("account.common.passwordPlaceholder"),trigger:"blur"},{min:6,max:30,message:this.$t("account.common.passwordError"),trigger:"blur"}]},error:"",success:!1,redirect:"",redirect_button:"",homepage:"/"}},computed:{canSubmit(){return this.form.email&&this.form.password},lang(){return L.Z.getLocale()}},mounted(){L.Z.generateFingerprint(),this.checkDirect()},methods:{onLogin(){this.error="",this.$refs.loginForm.validate((async e=>{e&&(0,b.Iq)(this.form,{app:this.app}).then((e=>{this.$message.success(this.$t("account.common.loginSuccess")),this.success=!0,L.Z.update(e.data.data).then((()=>{this.skip()}))})).catch((e=>{var t;this.success=!1,this.error=(null===(t=e.data)||void 0===t?void 0:t.msg)||this.$t("account.email.loginFailed")}))}))},checkDirect(){const e=new URLSearchParams(document.location.search),t=e.get("redirect");sessionStorage.setItem("redirect",t),t?(this.redirect=t,this.redirect_button=this.$t("account.common.jump")):(this.redirect=this.homepage,this.redirect_button=this.$t("account.common.backToHome"))},skip(){this.redirect&&setTimeout((()=>{sessionStorage.setItem("redirect",""),location.href=decodeURIComponent(this.redirect)}),1200)}}},S=n(3744);const W=(0,S.Z)($,[["render",_]]);var P=W,Z=n(650),D={name:"AccountEmailLogin",components:{login:P,Footer:Z.Z},data(){return{app:""}},computed:{registerLink(){const e=this.$router.resolve({name:"email-register"});return e.href},resetPwdLink(){const e=this.$router.resolve({name:"email-reset-password"});return e.href}},mounted(){const e=new URLSearchParams(document.location.search);e.has("app")?this.app=e.get("app"):this.app="miipet"}};const x=(0,S.Z)(D,[["render",i]]);var z=x},1814:function(e){e.exports=JSON.parse('{"S":"https://cdn.iruxu.com","v":"https://uc.iruxu.com"}')}}]);
//# sourceMappingURL=47.e0c00d27.js.map