{"version":3,"file":"js/335.179380e2.js","mappings":"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","sources":["webpack://i/./src/service/username.js","webpack://i/./src/components/account/common/footer.vue","webpack://i/./src/components/account/common/footer.vue?db8a","webpack://i/./src/views/account/username/login.vue","webpack://i/./src/views/account/username/components/login.vue","webpack://i/./src/views/account/username/components/login.vue?8f79","webpack://i/./src/views/account/username/login.vue?74f2"],"sourcesContent":["import { $uc } from \"@iruxu/rx-common/utils/api\";\n\n// ============ 用户名相关 ============\n/**\n * 查询用户名称是否可用\n * @param {String} username 用户名\n * @returns {Promise}\n */\nexport async function checkUsername(username) {\n    return $uc()\n        .get(\"/api/uc/user/account/username/valid\", {\n            params: {\n                username,\n            },\n        })\n        .then((res) => res.data.data?.isExist);\n}\n\n/**\n * 注册账号 - 用户名注册\n * @param {Object} data\n * @param {String} data.username 用户名\n * @param {String} data.password 密码\n * @param {Object} params\n * @param {String} params.app 应用标识\n * @returns\n */\nexport function registerByUsername(data, params) {\n    return $uc().post(\"/api/uc/user/account/username/register\", data, {\n        params,\n    });\n}\n\n/**\n * 用户登录\n * @param {Object} data\n * @param {String} data.username 用户名\n * @param {String} data.password 密码\n * @param {Object} params\n * @param {String} params.app 应用标识\n * @returns\n */\nexport function loginByUsername(data, params) {\n    return $uc({ mute: true }).post(\"/api/uc/user/account/username/login\", data, {\n        params,\n    });\n}\n","<template>\n    <footer class=\"m-footer\">© RX-PLANET</footer>\n</template>\n\n<script>\nexport default {\n    name: \"RX-Footer1\",\n    props: [],\n    components: {},\n    data: function () {\n        return {};\n    },\n    computed: {},\n    watch: {},\n    methods: {},\n    created: function () {},\n    mounted: function () {},\n};\n</script>\n\n<style lang=\"less\">\n.m-footer {\n    padding: 10px 0;\n    text-align: center;\n    font-size: 12px;\n    letter-spacing: 0.5px;\n    color: #999;\n    font-family: \"Trebuchet MS\", \"Lucida Sans Unicode\", \"Lucida Grande\", \"Lucida Sans\", Arial, sans-serif;\n}\n</style>\n","import { render } from \"./footer.vue?vue&type=template&id=6038436a\"\nimport script from \"./footer.vue?vue&type=script&lang=js\"\nexport * from \"./footer.vue?vue&type=script&lang=js\"\n\nimport \"./footer.vue?vue&type=style&index=0&id=6038436a&lang=less\"\n\nimport exportComponent from \"/home/runner/work/i/i/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div class=\"p-account p-account-username--login\">\n        <el-row class=\"m-container\" justify=\"center\">\n            <div class=\"m-login\">\n                <logo :app=\"app\" />\n                <login :app=\"app\" :registerLink=\"registerLink\"></login>\n            </div>\n        </el-row>\n        <Footer />\n    </div>\n</template>\n\n<script>\nimport login from \"./components/login.vue\";\nimport Footer from \"@/components/account/common/footer.vue\";\nexport default {\n    name: \"AccountUsernameLogin\",\n    components: {\n        login,\n        Footer,\n    },\n    data() {\n        return {\n            app: \"\",\n        };\n    },\n    computed: {\n        registerLink() {\n            const path = this.$router.resolve({ name: \"username-register\" });\n            return path.href;\n        },\n    },\n    mounted() {\n        const search = new URLSearchParams(document.location.search);\n\n        if (search.has(\"app\")) {\n            this.app = search.get(\"app\");\n        } else {\n            this.app = \"miipet\";\n        }\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"@/assets/css/account/common.less\";\n@import \"@/assets/css/account/email/login.less\";\n</style>\n","<!-- 公共组件 用户名注册 -->\n<template>\n    <div class=\"m-card m-login-card\">\n        <card-header :title=\"$t('account.common.login')\">\n            <template #right>\n                <lang-select :lang=\"lang\" />\n            </template>\n        </card-header>\n\n        <div class=\"m-card-main\" v-if=\"!success\">\n            <el-form\n                ref=\"loginForm\"\n                :model=\"form\"\n                label-position=\"top\"\n                :rules=\"rules\"\n                size=\"large\"\n                class=\"m-card-form\"\n                hide-required-asterisk\n            >\n                <el-form-item prop=\"username\">\n                    <template #label>\n                        <div class=\"m-card-form-label\">\n                            <span>{{ $t(\"account.username.name\") }}</span>\n                        </div>\n                    </template>\n                    <el-input v-model.trim=\"form.username\" size=\"large\"> </el-input>\n                </el-form-item>\n                <el-form-item prop=\"password\">\n                    <template #label>\n                        <div class=\"m-card-form-label\">\n                            <span>{{ $t(\"account.common.password\") }}</span>\n                        </div>\n                    </template>\n                    <el-input\n                        v-model.trim=\"form.password\"\n                        @keydown.enter=\"onLogin\"\n                        type=\"password\"\n                        size=\"large\"\n                        show-password\n                    >\n                    </el-input>\n                </el-form-item>\n            </el-form>\n            <el-alert class=\"u-alert\" v-if=\"error\" type=\"error\" show-icon :title=\"error\"></el-alert>\n            <el-button class=\"u-btn u-submit\" type=\"primary\" @click=\"onLogin\" :disabled=\"!canSubmit\">{{\n                $t(\"account.common.login\")\n            }}</el-button>\n        </div>\n\n        <div v-else class=\"m-card-main\">\n            <el-alert\n                class=\"m-alert\"\n                :title=\"$t('account.common.loginSuccess')\"\n                type=\"success\"\n                :description=\"$t('account.common.loginSuccessDesc')\"\n                show-icon\n                :closable=\"false\"\n            >\n            </el-alert>\n            <a class=\"u-skip el-button u-btn el-button--primary\" :href=\"redirect\">{{ redirect_button }}</a>\n        </div>\n    </div>\n    <div class=\"m-footer\">\n        <div class=\"m-footer-skip\">\n            {{ $t(\"account.common.noAccount\") }}\n            <a class=\"u-link\" :href=\"registerLink\">{{ $t(\"account.common.registerNow\") }} 👉</a>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { loginByUsername } from \"@/service/username\";\nimport User from \"@iruxu/rx-common/utils/user\";\nexport default {\n    name: \"UsernameLogin\",\n    props: {\n        app: {\n            type: String,\n            default: \"\",\n        },\n    },\n    data() {\n        return {\n            form: {\n                username: \"\",\n                password: \"\",\n            },\n\n            rules: {\n                username: [\n                    { required: true, message: this.$t(\"account.username.namePlaceholder\"), trigger: \"blur\" },\n                    { min: 3, max: 20, message: this.$t(\"account.username.nameError\"), trigger: \"blur\" },\n                ],\n                password: [\n                    { required: true, message: this.$t(\"account.common.passwordPlaceholder\"), trigger: \"blur\" },\n                    { min: 6, max: 30, message: this.$t(\"account.common.passwordError\"), trigger: \"blur\" },\n                ],\n            },\n\n            error: \"\",\n            success: false,\n            redirect: \"\",\n            redirect_button: \"跳转\",\n            homepage: \"/\",\n        };\n    },\n    computed: {\n        canSubmit() {\n            return this.form.username && this.form.password;\n        },\n        registerLink() {\n            const path = this.$router.resolve({ name: \"username-register\", query: { app: this.app } });\n\n            return path.href;\n        },\n        lang() {\n            return User.getLocale();\n        },\n    },\n    mounted() {\n        // 生成特征码\n        User.generateFingerprint();\n        this.checkDirect();\n    },\n    methods: {\n        onLogin() {\n            this.error = \"\";\n            this.$refs.loginForm.validate(async (valid) => {\n                if (valid) {\n                    loginByUsername(this.form, { app: this.app })\n                        .then((res) => {\n                            this.$message.success(this.$t(\"account.common.loginSuccess\"));\n                            this.success = true;\n\n                            User.update(res.data.data).then(() => {\n                                this.skip();\n                            });\n                        })\n                        .catch((err) => {\n                            this.success = false;\n                            this.error = err.data?.msg || this.$t(\"account.username.loginFailed\");\n                        });\n                }\n            });\n        },\n        checkDirect() {\n            let search = new URLSearchParams(document.location.search);\n            let redirect = search.get(\"redirect\");\n            if (redirect) {\n                this.redirect = redirect;\n                this.redirect_button = this.$t(\"account.common.jump\");\n            } else {\n                this.redirect = this.homepage;\n                this.redirect_button = this.$t(\"account.common.backToHome\");\n            }\n        },\n        skip() {\n            if (this.redirect) {\n                setTimeout(() => {\n                    location.href = decodeURIComponent(this.redirect);\n                }, 1200);\n            }\n        },\n    },\n};\n</script>\n","import { render } from \"./login.vue?vue&type=template&id=5294e4aa\"\nimport script from \"./login.vue?vue&type=script&lang=js\"\nexport * from \"./login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/i/i/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./login.vue?vue&type=template&id=1b7abd44\"\nimport script from \"./login.vue?vue&type=script&lang=js\"\nexport * from \"./login.vue?vue&type=script&lang=js\"\n\nimport \"./login.vue?vue&type=style&index=0&id=1b7abd44&lang=less\"\n\nimport exportComponent from \"/home/runner/work/i/i/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["async","checkUsername","username","$uc","get","params","then","res","data","isExist","registerByUsername","post","loginByUsername","mute","class","_createElementBlock","name","props","components","computed","watch","methods","created","mounted","__exports__","render","_createVNode","_component_el_row","justify","_createElementVNode","_component_logo","app","$data","_component_login","registerLink","$options","_component_Footer","_component_card_header","title","_ctx","right","_component_lang_select","lang","_component_el_alert","type","description","closable","href","_hoisted_6","_component_el_form","ref","model","rules","size","_component_el_form_item","prop","label","_toDisplayString","_component_el_input","$event","trim","password","onKeydown","_createBlock","_component_el_button","onClick","disabled","_hoisted_9","String","default","form","required","message","this","$t","trigger","min","max","error","success","redirect","redirect_button","homepage","canSubmit","path","$router","resolve","query","User","checkDirect","onLogin","$refs","loginForm","validate","valid","$message","skip","catch","err","msg","search","URLSearchParams","document","location","setTimeout","decodeURIComponent","login","Footer","has"],"sourceRoot":""}