{"version":3,"file":"js/745.3eca0b25.js","mappings":"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","sources":["webpack://i/./src/views/notification/message-detail.vue","webpack://i/./src/views/notification/message-detail.vue?551b"],"sourcesContent":["<template>\n    <div class=\"p-message-detail\" v-loading=\"loading\">\n        <page-header></page-header>\n        <div class=\"l-dashboard-primary\">\n            <messageFilter @update=\"toList\"></messageFilter>\n            <div class=\"w-card m-detail\">\n                <div class=\"m-op\">\n                    <div class=\"u-op\">\n                        <el-tooltip\n                            class=\"u-box-item\"\n                            effect=\"light\"\n                            :content=\"$t('notification.message.toolbar.back')\"\n                            placement=\"top\"\n                        >\n                            <div class=\"u-op-icon u-back\" @click=\"handleBack\">\n                                <el-icon><Back /></el-icon>\n                            </div>\n                        </el-tooltip>\n                        <el-tooltip\n                            class=\"u-box-item\"\n                            effect=\"light\"\n                            :content=\"$t('notification.message.toolbar.delete')\"\n                            placement=\"top\"\n                        >\n                            <div class=\"u-op-icon u-delete\" @click=\"handleDelete\">\n                                <el-icon><Delete /></el-icon>\n                            </div>\n                        </el-tooltip>\n                    </div>\n                    <div class=\"u-op\">\n                        <span class=\"u-page\">{{ index + 1 }} - {{ per > total ? total : per }} / {{ total }}</span>\n\n                        <el-tooltip\n                            class=\"u-box-item\"\n                            effect=\"light\"\n                            :content=\"$t('notification.message.toolbar.previous')\"\n                            placement=\"top\"\n                        >\n                            <div\n                                class=\"u-op-icon u-page-btn\"\n                                :class=\"previewDisabled ? 'is-disabled' : ''\"\n                                @click=\"handlePrevious\"\n                            >\n                                <el-icon><ArrowLeft /></el-icon>\n                            </div>\n                        </el-tooltip>\n                        <el-tooltip\n                            class=\"u-box-item\"\n                            effect=\"light\"\n                            :content=\"$t('notification.message.toolbar.next')\"\n                            placement=\"top\"\n                        >\n                            <div\n                                class=\"u-op-icon u-page-btn\"\n                                :class=\"nextDisabled ? 'is-disabled' : ''\"\n                                @click=\"handleNext\"\n                            >\n                                <el-icon><ArrowRight /></el-icon>\n                            </div>\n                        </el-tooltip>\n                    </div>\n                </div>\n                <div class=\"m-content\" :class=\"detail.status === 1 ? 'is-read' : ''\">\n                    <div class=\"u-title\">\n                        <span>{{ detail.title || \"-\" }}</span>\n                        <span v-if=\"levelMap[detail.level]?.label\" class=\"u-level\" :class=\"`u-level-${detail.level}`\">\n                            {{ levelMap[detail.level]?.label }}\n                        </span>\n                    </div>\n                    <div class=\"u-desc\">\n                        <div v-if=\"detail.app\" class=\"u-avatar\">\n                            <img class=\"u-img\" :src=\"getAppIcon(detail.app)\" />\n                            <span>{{ detail.app || \"-\" }}</span>\n                        </div>\n                        <time class=\"u-time\">{{ formatDate(detail.created_at, \"datetime\") }}</time>\n                    </div>\n                    <div class=\"u-content\" v-html=\"detail.content\"></div>\n                    <div class=\"u-meta\">\n                        <span class=\"u-meta-key\">\n                            {{ $t(\"notification.message.table.remark\") }}\n                        </span>\n                        <span class=\"u-meta-val u-misc\">{{ detail.remark || \"-\" }}</span>\n                        <el-icon class=\"u-edit\" @click=\"handleRemark\"><EditPen></EditPen></el-icon>\n                    </div>\n                    <div class=\"u-meta\">\n                        <span class=\"u-meta-key\">\n                            {{ $t(\"notification.message.meta.link\") }}\n                        </span>\n                        <a class=\"u-meta-val u-link\" v-if=\"detail.link\" :href=\"detail.link\" target=\"_blank\"\n                            ><el-icon><Link /></el-icon> {{ detail.link }}</a\n                        >\n                        <span class=\"u-meta-val u-misc\" v-else>-</span>\n                    </div>\n                    <div class=\"u-meta\">\n                        <span class=\"u-meta-key\">\n                            {{ $t(\"notification.message.meta.misc\") }}\n                        </span>\n                        <span class=\"u-meta-val u-misc\" :class=\"`u-status-${detail.status}`\">\n                            {{ detail.type || \"-\" }} ✿ {{ detail.subtype || \"-\" }} ✿ {{ detail.resource_type || \"-\" }} ✿\n                            {{ detail.resource_id || \"-\" }}\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { getMessages, delMessages, getMessage, readAllMessages, updateMessage } from \"@/service/notification\";\nimport pageHeader from \"@/components/common/page-header.vue\";\nimport messageFilter from \"./components/message-filter.vue\";\nimport { arr2map } from \"@/utils/index\";\nimport { levels, statusList } from \"@/assets/data/message.js\";\nimport { formatDate } from \"@/utils/index\";\nexport default {\n    name: \"MessageDetail\",\n    components: {\n        pageHeader,\n        messageFilter,\n    },\n    data() {\n        return {\n            loading: false,\n            page: 1,\n            per: 10,\n            index: 0,\n            total: 0,\n            detail: {},\n            ids: [],\n        };\n    },\n    computed: {\n        id() {\n            return ~~this.$route.params.id;\n        },\n        previewDisabled() {\n            return this.page === 1 && this.index === 0;\n        },\n        nextDisabled() {\n            return this.total <= (this.page - 1) * this.per + this.index + 1;\n        },\n        levelMap() {\n            return arr2map({ array: levels, key: \"value\" });\n        },\n        statusMap() {\n            return arr2map({ array: statusList, key: \"value\" });\n        },\n    },\n    watch: {\n        id(id) {\n            if (!id) return;\n            this.init();\n        },\n    },\n    mounted() {\n        this.init();\n    },\n    methods: {\n        updateMessageStatus() {\n            const id = this.id + \"\";\n            readAllMessages(id);\n        },\n        init() {\n            const query = this.$route.query;\n            if (query.page) {\n                this.page = Number(query.page);\n            }\n            if (query.per) {\n                this.per = Number(query.per);\n            }\n            if (query.total) {\n                this.total = Number(query.total);\n            }\n            if (query.index) {\n                this.index = Number(query.index);\n            }\n            this.loadMessages();\n            this.loadData();\n        },\n        formatDate,\n        toList(params) {\n            this.$router.push({ name: \"dashboard-notification-message\", params });\n        },\n        handleBack() {\n            const params = {\n                page: this.page,\n                per: this.per,\n            };\n            this.$router.push({ name: \"dashboard-notification-message\", params });\n        },\n        handleDelete() {\n            const id = this.id;\n            if (!id) return;\n            this.$confirm(this.$t(\"notification.message.table.del_message\"), this.$t(\"common.messagebox.title\"), {\n                confirmButtonText: this.$t(\"common.messagebox.confirm\"),\n                cancelButtonText: this.$t(\"common.messagebox.cancel\"),\n                type: \"warning\",\n            })\n                .then(() => {\n                    this.loading = true;\n                    delMessages(id)\n                        .then(() => {\n                            this.$notify({\n                                title: this.$t(\"common.messagebox.success\"),\n                                type: \"success\",\n                                duration: 2000,\n                            });\n\n                            this.handleBack();\n                        })\n                        .finally(() => {\n                            this.loading = false;\n                        });\n                })\n                .catch(() => {});\n        },\n        loadData() {\n            this.loading = true;\n            getMessage(this.id)\n                .then((res) => {\n                    this.detail = res.data.data || {};\n                    if (this.detail.status === 0) {\n                        this.updateMessageStatus();\n                    }\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        async loadMessages() {\n            await getMessages({\n                page: this.page,\n                per: this.per,\n            }).then((res) => {\n                const { list, total } = res.data.data;\n                const ids = list.map((item) => item.id);\n                this.ids = ids;\n                this.total = total;\n            });\n        },\n\n        handleRemark() {\n            const { id, remark } = this.detail;\n            this.$prompt(this.$t(\"notification.message.table.remark_placeholder\"), this.$t(\"common.messagebox.title\"), {\n                confirmButtonText: this.$t(\"common.messagebox.confirm\"),\n                cancelButtonText: this.$t(\"common.messagebox.cancel\"),\n                inputValue: remark,\n            })\n                .then(({ value }) => {\n                    const data = {\n                        remark: value,\n                    };\n                    if (value === remark) {\n                        return;\n                    }\n                    updateMessage(id, data).then(() => {\n                        this.$notify({\n                            title: this.$t(\"common.messagebox.success\"),\n                            type: \"success\",\n                            duration: 2000,\n                        });\n                        this.detail.remark = value;\n                    });\n                })\n                .catch(() => {});\n        },\n\n        handlePrevious() {\n            if (this.previewDisabled) return;\n            if (this.index === 0 && this.page === 1) {\n                return;\n            }\n            if (this.index === 0 && this.page > 1) {\n                this.page = this.page - 1;\n                this.loadMessages().then(() => {\n                    const id = this.ids[this.ids.length - 1];\n                    this.$router.push({\n                        path: `/dashboard/notification/message-detail/${id}`,\n                        query: {\n                            page: this.page,\n                            per: this.per,\n                            index: this.ids.length - 1,\n                            total: this.total,\n                        },\n                    });\n                });\n            }\n            if (this.index > 0) {\n                const index = this.index - 1;\n                const id = this.ids[index];\n                this.$router.push({\n                    path: `/dashboard/notification/message-detail/${id}`,\n                    query: {\n                        page: this.page,\n                        per: this.per,\n                        index,\n                        total: this.total,\n                    },\n                });\n            }\n        },\n        handleNext() {\n            if (this.nextDisabled) return;\n            const isLastPage = this.page === Math.ceil(this.total / this.per);\n            const isLastMessage = this.index >= this.per - 1;\n            console.log(isLastMessage, isLastPage);\n            if (isLastMessage && isLastPage) {\n                return;\n            }\n            if (isLastMessage && !isLastPage) {\n                this.page = this.page + 1;\n                this.loadMessages().then(() => {\n                    const id = this.ids[0];\n                    this.$router.push({\n                        path: `/dashboard/notification/message-detail/${id}`,\n                        query: {\n                            page: this.page,\n                            per: this.per,\n                            index: 0,\n                            total: this.total,\n                        },\n                    });\n                });\n            }\n            if (!isLastMessage) {\n                const index = this.index + 1;\n                const id = this.ids[index];\n                this.$router.push({\n                    path: `/dashboard/notification/message-detail/${id}`,\n                    query: {\n                        page: this.page,\n                        per: this.per,\n                        index,\n                        total: this.total,\n                    },\n                });\n            }\n        },\n        getAppIcon(key) {\n            return require(`../../assets/img/app/${key}.svg`);\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"@/assets/css/notification/message/detail.less\";\n</style>\n","import { render } from \"./message-detail.vue?vue&type=template&id=3ac9767c\"\nimport script from \"./message-detail.vue?vue&type=script&lang=js\"\nexport * from \"./message-detail.vue?vue&type=script&lang=js\"\n\nimport \"./message-detail.vue?vue&type=style&index=0&id=3ac9767c&lang=less\"\n\nimport exportComponent from \"/home/runner/work/i/i/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createVNode","_component_page_header","_createElementVNode","_component_messageFilter","onUpdate","$options","_component_el_tooltip","effect","content","_ctx","placement","onClick","_component_el_icon","_component_Back","_component_Delete","_toDisplayString","$data","_component_ArrowLeft","_component_ArrowRight","status","title","level","label","app","src","created_at","innerHTML","remark","_component_EditPen","link","href","target","_component_Link","type","subtype","resource_type","resource_id","name","components","pageHeader","messageFilter","data","loading","page","per","index","total","detail","ids","computed","id","this","$route","params","previewDisabled","nextDisabled","levelMap","arr2map","array","levels","key","statusMap","statusList","watch","init","mounted","methods","updateMessageStatus","readAllMessages","query","Number","loadMessages","loadData","formatDate","toList","$router","push","handleBack","handleDelete","$confirm","$t","confirmButtonText","cancelButtonText","then","delMessages","$notify","duration","finally","catch","getMessage","res","async","getMessages","list","map","item","handleRemark","$prompt","inputValue","value","updateMessage","handlePrevious","length","path","handleNext","isLastPage","Math","ceil","isLastMessage","console","log","getAppIcon","require","__exports__","render"],"sourceRoot":""}