"use strict";(self["webpackChunki"]=self["webpackChunki"]||[]).push([[634],{9358:function(e,r,a){a.d(r,{N5:function(){return n},j2:function(){return o},pt:function(){return s}});var t=a(6102);async function s(e){return(0,t.VM)().get("/api/uc/user/account/username/valid",{params:{username:e}}).then((e=>{var r;return null===(r=e.data.data)||void 0===r?void 0:r.isExist}))}function n(e,r){return(0,t.VM)().post("/api/uc/user/account/username/register",e,{params:r})}function o(e,r){return(0,t.VM)({mute:!0}).post("/api/uc/user/account/username/login",e,{params:r})}},650:function(e,r,a){a.d(r,{Z:function(){return u}});var t=a(6252);const s={class:"m-footer"};function n(e,r,a,n,o,c){return(0,t.wg)(),(0,t.iD)("footer",s,"© RX-PLANET")}var o={name:"RX-Footer",props:[],components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},c=a(3744);const i=(0,c.Z)(o,[["render",n]]);var u=i},3634:function(e,r,a){a.r(r),a.d(r,{default:function(){return C}});var t=a(6252);const s={class:"p-account p-account-username--register"},n={class:"m-register"};function o(e,r,a,o,c,i){const u=(0,t.up)("logo"),l=(0,t.up)("register",!0),m=(0,t.up)("el-row"),p=(0,t.up)("Footer");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(m,{class:"m-container",justify:"center"},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t.Wm)(u,{app:c.app},null,8,["app"]),(0,t.Wm)(l,{app:c.app,loginLink:i.loginLink},null,8,["app","loginLink"])])])),_:1}),(0,t.Wm)(p)])}var c=a(3577);const i={class:"m-card m-register-card"},u={key:0,class:"m-card-main"},l={class:"m-card-form-label"},m={class:"m-card-form-label"},p={class:"u-terms"},d=["href"],g={key:1,class:"m-card-main"},f={key:2,class:"m-card-main"},h={class:"m-footer"},w={class:"m-footer-skip"},k=["href"];function b(e,r,a,s,n,o){const b=(0,t.up)("lang-select"),$=(0,t.up)("card-header"),v=(0,t.up)("el-input"),_=(0,t.up)("el-form-item"),y=(0,t.up)("el-form"),W=(0,t.up)("el-checkbox"),z=(0,t.up)("el-button"),L=(0,t.up)("el-alert");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",i,[(0,t.Wm)($,{title:e.$t("account.common.register")},{right:(0,t.w5)((()=>[(0,t.Wm)(b,{lang:n.form.lang,onChange:o.changeLang},null,8,["lang","onChange"])])),_:1},8,["title"]),null===n.success?((0,t.wg)(),(0,t.iD)("div",u,[(0,t.Wm)(y,{class:"m-card-form","hide-required-asterisk":"",ref:"registerForm",model:n.form,rules:n.rules,size:"large","status-icon":"","label-position":"top"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{prop:"username"},{label:(0,t.w5)((()=>[(0,t._)("div",l,[(0,t._)("span",null,[(0,t.Uk)((0,c.zw)(e.$t("account.username.name")),1),r[3]||(r[3]=(0,t._)("i",{class:"is-required"},"*",-1))])])])),default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:n.form.username,"onUpdate:modelValue":r[0]||(r[0]=e=>n.form.username=e),modelModifiers:{trim:!0},size:"large"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(_,{prop:"password",class:"m-password"},{label:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t._)("span",null,[(0,t.Uk)((0,c.zw)(e.$t("account.common.password")),1),r[4]||(r[4]=(0,t._)("i",{class:"is-required"},"*",-1))])])])),default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:n.form.password,"onUpdate:modelValue":r[1]||(r[1]=e=>n.form.password=e),modelModifiers:{trim:!0},type:"password",size:"large","show-password":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),(0,t._)("div",p,[(0,t.Wm)(W,{modelValue:n.agreement,"onUpdate:modelValue":r[2]||(r[2]=e=>n.agreement=e),class:"u-checkbox"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.$t("account.common.read"))+" ",1),(0,t._)("a",{href:n.terms,target:"_blank"},"《"+(0,c.zw)(e.$t("account.common.terms"))+"》 ",9,d)])),_:1},8,["modelValue"])]),(0,t.Wm)(z,{class:"u-button u-submit",type:"primary",onClick:o.onRegister,disabled:!o.canSubmit},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.$t("account.common.register")),1)])),_:1},8,["onClick","disabled"])])):(0,t.kq)("",!0),1==n.success?((0,t.wg)(),(0,t.iD)("main",g,[(0,t.Wm)(L,{class:"m-alert",title:e.$t("account.email.registerSuccess"),type:"success",description:e.$t("account.email.registerSuccessDesc"),"show-icon":"",closable:!1},null,8,["title","description"]),(0,t.Wm)(z,{size:"large",class:"u-btn u-back",type:"primary",onClick:o.goLogin},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.$t("account.common.login")),1)])),_:1},8,["onClick"])])):(0,t.kq)("",!0),0==n.success?((0,t.wg)(),(0,t.iD)("main",f,[(0,t.Wm)(L,{class:"m-alert",title:e.$t("account.email.registerFailed"),type:"error",description:e.$t("account.email.registerFailedDesc"),"show-icon":"",closable:!1},null,8,["title","description"]),(0,t.Wm)(z,{size:"large",class:"u-btn u-back",type:"primary",onClick:o.onBack},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.$t("account.common.back")),1)])),_:1},8,["onClick"])])):(0,t.kq)("",!0)]),(0,t._)("div",h,[(0,t._)("div",w,[(0,t.Uk)((0,c.zw)(e.$t("account.common.hadAccount"))+" ",1),(0,t._)("a",{class:"u-link",href:o.loginLink},(0,c.zw)(e.$t("account.common.login"))+" »",9,k)])])],64)}var $=a(9358),v=a(9158),_={name:"UsernameRegister",props:{app:{type:String,default:""},agreements:{type:Array,default:()=>[]}},data(){return{form:{username:"",password:"",lang:""},rules:{username:[{required:!0,message:this.$t("account.username.namePlaceholder"),trigger:"blur"},{validator:this.check,trigger:"blur"},{min:3,max:30,message:this.$t("account.username.nameError"),trigger:"blur"}],password:[{required:!0,message:this.$t("account.common.passwordPlaceholder"),trigger:"blur"},{min:6,max:30,message:this.$t("account.common.passwordError"),trigger:"blur"}]},agreement:!1,success:null,terms:"/document/terms"}},computed:{canSubmit(){return this.form.username&&this.form.password&&this.agreement},loginLink(){const e=this.$router.resolve({name:"username-login",query:{app:this.app}});return e.href}},async mounted(){v.Z.generateFingerprint(),this.form.lang=v.Z.getLocale()},methods:{async check(e,r,a){if(r){const e=/^[a-zA-Z][a-zA-Z0-9]{2,19}$/;if(e.test(r)){const e=await(0,$.pt)(r);e?a(new Error(this.$t("account.username.nameExist"))):a()}else a(new Error(this.$t("account.username.nameValidate")))}else a(new Error(this.$t("account.username.namePlaceholder")))},onRegister(){this.$refs.registerForm.validate((async e=>{e&&(0,$.N5)(this.form,{app:this.app}).then((()=>{this.$message.success(this.$t("account.username.registerSuccess")),this.success=!0})).catch((()=>{this.success=!1}))}))},changeLang(e){this.form.lang=e},goLogin(){location.href=this.loginLink},onBack(){this.success=null}}},y=a(3744);const W=(0,y.Z)(_,[["render",b]]);var z=W,L=a(650),U={name:"AccountUsernameRegister",components:{Register:z,Footer:L.Z},data(){return{app:""}},computed:{loginLink(){const e=this.$router.resolve({name:"username-login"});return e.href}},mounted(){const e=new URLSearchParams(document.location.search);e.has("app")?this.app=e.get("app"):this.app="miipet"}};const V=(0,y.Z)(U,[["render",o]]);var C=V}}]);
//# sourceMappingURL=634.06cdd012.js.map