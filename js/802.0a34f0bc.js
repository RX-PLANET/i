"use strict";(self["webpackChunki"]=self["webpackChunki"]||[]).push([[802],{3944:function(e,t,n){n.d(t,{M:function(){return a}});var o=n(6102);function a(e){return(0,o.nj)().get(`/api/cms/common/document/${e}`)}},6430:function(e,t,n){n.d(t,{Z:function(){return k}});var o=n(6252),a=n(3577),s=n(9963);const i={class:"c-header"},r={class:"c-header_main"},c={class:"c-header-left"},l={key:0,class:"c-header__title"},d={key:1,class:"c-header__desc"},u={class:"c-header-right"},m={class:"c-header__profile"},g={class:"u-name"};function h(e,t,n,h,p,v){var f,w;const _=(0,o.up)("lang-select"),k=(0,o.up)("el-dropdown-item"),y=(0,o.up)("el-dropdown-menu"),$=(0,o.up)("el-dropdown");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",r,[(0,o._)("div",c,[null!==(f=v.routeMeta)&&void 0!==f&&f.title?((0,o.wg)(),(0,o.iD)("div",l,(0,a.zw)(v.routeMeta.title),1)):(0,o.kq)("",!0),null!==(w=v.routeMeta)&&void 0!==w&&w.desc?((0,o.wg)(),(0,o.iD)("div",d,(0,a.zw)(v.routeMeta.desc),1)):(0,o.kq)("",!0)]),(0,o._)("div",u,[(0,o.Wm)(_,{class:"c-header__lang",selected:"icon",onChange:v.onLangChange,lang:v.lang},null,8,["onChange","lang"]),(0,o.Wm)($,{trigger:"click"},{dropdown:(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k,{onClick:(0,s.iM)(v.logout,["stop"])},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("account.common.logout")),1)])),_:1},8,["onClick"])])),_:1})])),default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o._)("span",g,(0,a.zw)(v.profile.username||v.profile.nickname),1)])])),_:1})])])])}var p=n(9158),v=n(2878),f={name:"PageHeader",data:function(){return{}},computed:{routeMeta(){return this.$route.meta},profile(){return this.$store.state.user},avatar(){var e;return(null===(e=this.profile)||void 0===e?void 0:e.avatar)&&"null"!=this.profile.avatar||n(9743)},app(){return this.$store.state.app},lang(){return p.Z.getLocale()}},watch:{},methods:{logout(){(0,v.kS)().then((()=>{p.Z.logout(),this.$router.push({name:"email-login"})}))},onLangChange(e){(0,v.gS)({lang:e},{app:this.app}).then((()=>{location.reload()}))}}},w=n(3744);const _=(0,w.Z)(f,[["render",h]]);var k=_},7548:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var o=n(6252),a=n(3577),s=n.p+"img/destroy.9907aa93.svg";const i={class:"p-bind p-destroy-account"},r={key:0,class:"m-bind-block m-destroy-account"},c={class:"m-bind-block__main"},l={class:"u-header"},d=["innerHTML"],u={class:"m-login-card m-card-main"},m={key:1,class:"m-bind-block m-destroy-document"},g=["innerHTML"],h={class:"u-op"};function p(e,t,n,p,v,f){const w=(0,o.up)("page-header"),_=(0,o.up)("el-button"),k=(0,o.up)("el-checkbox");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(w),v.isNext?((0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("div",{class:"u-document",innerHTML:v.document},null,8,g),(0,o._)("div",h,[(0,o.Wm)(k,{size:"large",modelValue:v.isAgree,"onUpdate:modelValue":t[0]||(t[0]=e=>v.isAgree=e)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("security.destroy.agree")),1)])),_:1},8,["modelValue"]),(0,o.Wm)(_,{type:"danger",loading:v.loading,disabled:v.loading||!v.isAgree,onClick:f.submit,size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("security.destroy.confirm")),1)])),_:1},8,["loading","disabled","onClick"])])])):((0,o.wg)(),(0,o.iD)("div",r,[t[1]||(t[1]=(0,o._)("div",{class:"m-bind-block__pic"},[(0,o._)("img",{src:s})],-1)),(0,o._)("div",c,[(0,o._)("h1",l,(0,a.zw)(e.$t("security.nav.destroy")),1),(0,o._)("div",{class:"u-slogan",innerHTML:e.$t("security.destroy.alert")},null,8,d),(0,o._)("div",u,[(0,o.Wm)(_,{type:"danger",size:"large",onClick:f.onNext,style:{width:"100%"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("security.destroy.next")),1)])),_:1},8,["onClick"])])])]))])}var v=n(3907),f=n(2878),w=n(3944),_=n(6430),k=n(9158),y=n(8985),$={name:"dashboard-security-destroy",components:{pageHeader:_.Z},data(){return{loading:!1,isNext:!1,slug:"destroy_account",document:"",lang:k.Z.getLocale(),isAgree:!1}},computed:{...(0,v.rn)(["app"]),isCn(){return"zh-CN"===this.lang}},watch:{lang(){this.load()}},methods:{onNext(){this.isNext=!0,this.load()},load(){const e=this.slug;if(this.isCn)(0,w.M)(e).then((e=>{var t;this.document=(null===(t=e.data.data)||void 0===t?void 0:t.content)||"-"}));else{const t=(0,y.CJ)(`/common/document/${e}/${e}-${this.lang}.txt`);fetch(t).then((e=>{if(!e.ok)throw new Error(e.status);return e.text()})).then((e=>{this.document=e})).catch((e=>{console.error(e),this.document="-"}))}},logout(){k.Z.logout(),this.$router.replace({name:"email-login"})},submit(){this.$prompt(this.$t("security.destroy.confirmTip"),this.$t("common.messagebox.title"),{confirmButtonText:this.$t("common.messagebox.confirm"),cancelButtonText:this.$t("common.messagebox.cancel"),inputPattern:/^[^\u4e00-\u9fa5]{6,30}$/,inputErrorMessage:this.$t("account.common.passwordError")}).then((({value:e})=>{const t={password:e},n={};"iruxu"!==this.app&&(n.app=this.app),this.loading=!0,(0,f.az)(t,n).then((()=>{this.$message.success(this.$t("security.destroy.success")),this.logout()}))})).catch((()=>{}))}}},b=n(3744);const x=(0,b.Z)($,[["render",p]]);var C=x},9743:function(e,t,n){e.exports=n.p+"img/test.2ffd992c.png"}}]);
//# sourceMappingURL=802.0a34f0bc.js.map