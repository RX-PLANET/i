{"version":3,"file":"js/634.06cdd012.js","mappings":"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","sources":["webpack://i/./src/service/username.js","webpack://i/./src/components/account/common/footer.vue","webpack://i/./src/components/account/common/footer.vue?db8a","webpack://i/./src/views/account/username/register.vue","webpack://i/./src/views/account/username/components/register.vue","webpack://i/./src/views/account/username/components/register.vue?5cf3","webpack://i/./src/views/account/username/register.vue?5d47"],"sourcesContent":["import { $uc } from \"@iruxu/rx-common/utils/api\";\n\n// ============ 用户名相关 ============\n/**\n * 查询用户名称是否可用\n * @param {String} username 用户名\n * @returns {Promise}\n */\nexport async function checkUsername(username) {\n    return $uc()\n        .get(\"/api/uc/user/account/username/valid\", {\n            params: {\n                username,\n            },\n        })\n        .then((res) => res.data.data?.isExist);\n}\n\n/**\n * 注册账号 - 用户名注册\n * @param {Object} data\n * @param {String} data.username 用户名\n * @param {String} data.password 密码\n * @param {Object} params\n * @param {String} params.app 应用标识\n * @returns\n */\nexport function registerByUsername(data, params) {\n    return $uc().post(\"/api/uc/user/account/username/register\", data, {\n        params,\n    });\n}\n\n/**\n * 用户登录\n * @param {Object} data\n * @param {String} data.username 用户名\n * @param {String} data.password 密码\n * @param {Object} params\n * @param {String} params.app 应用标识\n * @returns\n */\nexport function loginByUsername(data, params) {\n    return $uc({ mute: true }).post(\"/api/uc/user/account/username/login\", data, {\n        params,\n    });\n}\n","<template>\n    <footer class=\"m-footer\">© RX-PLANET</footer>\n</template>\n\n<script>\nexport default {\n    name: \"RX-Footer\",\n    props: [],\n    components: {},\n    data: function () {\n        return {};\n    },\n    computed: {},\n    watch: {},\n    methods: {},\n    created: function () {},\n    mounted: function () {},\n};\n</script>\n\n<style lang=\"less\">\n.m-footer {\n    padding: 10px 0;\n    text-align: center;\n    font-size: 12px;\n    letter-spacing: 0.5px;\n    color: #999;\n    font-family: \"Trebuchet MS\", \"Lucida Sans Unicode\", \"Lucida Grande\", \"Lucida Sans\", Arial, sans-serif;\n}\n</style>\n","import { render } from \"./footer.vue?vue&type=template&id=f8199eda\"\nimport script from \"./footer.vue?vue&type=script&lang=js\"\nexport * from \"./footer.vue?vue&type=script&lang=js\"\n\nimport \"./footer.vue?vue&type=style&index=0&id=f8199eda&lang=less\"\n\nimport exportComponent from \"/home/runner/work/i/i/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div class=\"p-account p-account-username--register\">\n        <el-row class=\"m-container\" justify=\"center\">\n            <div class=\"m-register\">\n                <logo :app=\"app\" />\n                <register :app=\"app\" :loginLink=\"loginLink\" />\n            </div>\n        </el-row>\n        <Footer />\n    </div>\n</template>\n\n<script>\nimport Register from \"./components/register.vue\";\nimport Footer from \"@/components/account/common/footer.vue\";\nexport default {\n    name: \"AccountUsernameRegister\",\n    components: {\n        Register,\n        Footer,\n    },\n    data() {\n        return {\n            app: \"\",\n        };\n    },\n    computed: {\n        loginLink() {\n            const path = this.$router.resolve({ name: \"username-login\" });\n            return path.href;\n        },\n    },\n    mounted() {\n        const search = new URLSearchParams(document.location.search);\n\n        if (search.has(\"app\")) {\n            this.app = search.get(\"app\");\n        } else {\n            this.app = \"miipet\";\n        }\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"@/assets/css/account/common.less\";\n@import \"@/assets/css/account/username/register.less\";\n</style>\n","<!-- 公共组件 用户名注册 -->\n<template>\n    <div class=\"m-card m-register-card\">\n        <card-header :title=\"$t('account.common.register')\">\n            <template #right>\n                <lang-select :lang=\"form.lang\" @change=\"changeLang\" />\n            </template>\n        </card-header>\n\n        <div class=\"m-card-main\" v-if=\"success === null\">\n            <el-form\n                class=\"m-card-form\"\n                hide-required-asterisk\n                ref=\"registerForm\"\n                :model=\"form\"\n                :rules=\"rules\"\n                size=\"large\"\n                status-icon\n                label-position=\"top\"\n            >\n                <el-form-item prop=\"username\">\n                    <template #label>\n                        <div class=\"m-card-form-label\">\n                            <span>{{ $t(\"account.username.name\") }}<i class=\"is-required\">*</i></span>\n                        </div>\n                    </template>\n                    <el-input v-model.trim=\"form.username\" size=\"large\"> </el-input>\n                </el-form-item>\n                <el-form-item prop=\"password\" class=\"m-password\">\n                    <template #label>\n                        <div class=\"m-card-form-label\">\n                            <span>{{ $t(\"account.common.password\") }}<i class=\"is-required\">*</i></span>\n                        </div>\n                    </template>\n                    <el-input v-model.trim=\"form.password\" type=\"password\" size=\"large\" show-password> </el-input>\n                </el-form-item>\n            </el-form>\n            <div class=\"u-terms\">\n                <el-checkbox v-model=\"agreement\" class=\"u-checkbox\"\n                    >{{ $t(\"account.common.read\") }}\n                    <a :href=\"terms\" target=\"_blank\">《{{ $t(\"account.common.terms\") }}》 </a>\n                </el-checkbox>\n            </div>\n            <el-button class=\"u-button u-submit\" type=\"primary\" @click=\"onRegister\" :disabled=\"!canSubmit\">{{\n                $t(\"account.common.register\")\n            }}</el-button>\n        </div>\n\n        <main class=\"m-card-main\" v-if=\"success == true\">\n            <el-alert\n                class=\"m-alert\"\n                :title=\"$t('account.email.registerSuccess')\"\n                type=\"success\"\n                :description=\"$t('account.email.registerSuccessDesc')\"\n                show-icon\n                :closable=\"false\"\n            >\n            </el-alert>\n            <el-button size=\"large\" class=\"u-btn u-back\" type=\"primary\" @click=\"goLogin\">{{\n                $t(\"account.common.login\")\n            }}</el-button>\n        </main>\n\n        <main class=\"m-card-main\" v-if=\"success == false\">\n            <el-alert\n                class=\"m-alert\"\n                :title=\"$t('account.email.registerFailed')\"\n                type=\"error\"\n                :description=\"$t('account.email.registerFailedDesc')\"\n                show-icon\n                :closable=\"false\"\n            >\n            </el-alert>\n            <el-button size=\"large\" class=\"u-btn u-back\" type=\"primary\" @click=\"onBack\">{{\n                $t(\"account.common.back\")\n            }}</el-button>\n        </main>\n    </div>\n    <div class=\"m-footer\">\n        <div class=\"m-footer-skip\">\n            {{ $t(\"account.common.hadAccount\") }}\n            <a class=\"u-link\" :href=\"loginLink\">{{ $t(\"account.common.login\") }} &raquo;</a>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { checkUsername, registerByUsername } from \"@/service/username\";\nimport User from \"@iruxu/rx-common/utils/user\";\nexport default {\n    name: \"UsernameRegister\",\n    props: {\n        app: {\n            type: String,\n            default: \"\",\n        },\n        agreements: {\n            // 协议\n            type: Array,\n            default: () => [],\n        },\n    },\n    data() {\n        return {\n            form: {\n                username: \"\",\n                password: \"\",\n                lang: \"\",\n            },\n\n            rules: {\n                username: [\n                    { required: true, message: this.$t(\"account.username.namePlaceholder\"), trigger: \"blur\" },\n                    { validator: this.check, trigger: \"blur\" },\n                    { min: 3, max: 30, message: this.$t(\"account.username.nameError\"), trigger: \"blur\" },\n                ],\n                password: [\n                    { required: true, message: this.$t(\"account.common.passwordPlaceholder\"), trigger: \"blur\" },\n                    { min: 6, max: 30, message: this.$t(\"account.common.passwordError\"), trigger: \"blur\" },\n                ],\n            },\n\n            agreement: false,\n\n            success: null,\n\n            terms: \"/document/terms\",\n        };\n    },\n    computed: {\n        canSubmit() {\n            return this.form.username && this.form.password && this.agreement;\n        },\n        loginLink() {\n            const path = this.$router.resolve({ name: \"username-login\", query: { app: this.app } });\n            return path.href;\n        },\n    },\n    async mounted() {\n        // 生成特征码\n        User.generateFingerprint();\n\n        // 获取浏览器语言|系统语言\n        this.form.lang = User.getLocale();\n    },\n    methods: {\n        async check(rule, value, callback) {\n            if (!value) {\n                callback(new Error(this.$t(\"account.username.namePlaceholder\")));\n            } else {\n                // 长度最小3，最大20，禁止任何符号，不能是纯数字，必须以字母开头\n                const regex = /^[a-zA-Z][a-zA-Z0-9]{2,19}$/;\n                if (!regex.test(value)) {\n                    callback(new Error(this.$t(\"account.username.nameValidate\")));\n                } else {\n                    const res = await checkUsername(value);\n                    if (res) {\n                        callback(new Error(this.$t(\"account.username.nameExist\")));\n                    } else {\n                        callback();\n                    }\n                }\n            }\n        },\n        onRegister() {\n            this.$refs.registerForm.validate(async (valid) => {\n                if (valid) {\n                    registerByUsername(this.form, { app: this.app })\n                        .then(() => {\n                            this.$message.success(this.$t(\"account.username.registerSuccess\"));\n                            // this.$router.push({ name: \"username-login\", query: { app: this.app } });\n                            this.success = true;\n                        })\n                        .catch(() => {\n                            this.success = false;\n                        });\n                }\n            });\n        },\n        changeLang(lang) {\n            this.form.lang = lang;\n        },\n        goLogin() {\n            location.href = this.loginLink;\n        },\n        onBack() {\n            this.success = null;\n        },\n    },\n};\n</script>\n","import { render } from \"./register.vue?vue&type=template&id=12e839a4\"\nimport script from \"./register.vue?vue&type=script&lang=js\"\nexport * from \"./register.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/i/i/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./register.vue?vue&type=template&id=3ec9c8cf\"\nimport script from \"./register.vue?vue&type=script&lang=js\"\nexport * from \"./register.vue?vue&type=script&lang=js\"\n\nimport \"./register.vue?vue&type=style&index=0&id=3ec9c8cf&lang=less\"\n\nimport exportComponent from \"/home/runner/work/i/i/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["async","checkUsername","username","$uc","get","params","then","res","data","isExist","registerByUsername","post","loginByUsername","mute","class","_createElementBlock","name","props","components","computed","watch","methods","created","mounted","__exports__","render","_createVNode","_component_el_row","justify","_createElementVNode","_component_logo","app","$data","_component_register","loginLink","$options","_component_Footer","_component_card_header","title","_ctx","right","_component_lang_select","lang","onChange","_component_el_form","ref","model","rules","size","_component_el_form_item","prop","label","_component_el_input","$event","trim","password","type","_component_el_checkbox","href","target","_toDisplayString","_hoisted_6","_component_el_button","onClick","disabled","_component_el_alert","description","closable","_hoisted_11","String","default","agreements","Array","form","required","message","this","$t","trigger","validator","check","min","max","agreement","success","terms","canSubmit","path","$router","resolve","query","User","rule","value","callback","regex","test","Error","onRegister","$refs","registerForm","validate","valid","$message","catch","changeLang","goLogin","location","onBack","Register","Footer","search","URLSearchParams","document","has"],"sourceRoot":""}