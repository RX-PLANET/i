{"version":3,"file":"js/802.0a34f0bc.js","mappings":"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","sources":["webpack://i/./src/service/document.js","webpack://i/./src/components/common/page-header.vue","webpack://i/./src/components/common/page-header.vue?11cf","webpack://i/./src/views/security/destroy.vue","webpack://i/./src/views/security/destroy.vue?9025"],"sourcesContent":["import { $cms } from \"@iruxu/rx-common/utils/api.js\";\n\nexport function getDocument(slug) {\n    return $cms().get(`/api/cms/common/document/${slug}`);\n}\n","<template>\n    <div class=\"c-header\">\n        <div class=\"c-header_main\">\n            <div class=\"c-header-left\">\n                <div class=\"c-header__title\" v-if=\"routeMeta?.title\">{{ routeMeta.title }}</div>\n                <div class=\"c-header__desc\" v-if=\"routeMeta?.desc\">{{ routeMeta.desc }}</div>\n            </div>\n            <div class=\"c-header-right\">\n                <lang-select class=\"c-header__lang\" selected=\"icon\" @change=\"onLangChange\" :lang=\"lang\"></lang-select>\n                <el-dropdown trigger=\"click\">\n                    <div class=\"c-header__profile\">\n                        <span class=\"u-name\">{{ profile.username || profile.nickname }}</span>\n                        <!-- <el-avatar class=\"u-avatar\" :src=\"avatar\" shape=\"square\"></el-avatar> -->\n                    </div>\n                    <template #dropdown>\n                        <el-dropdown-menu>\n                            <el-dropdown-item @click.stop=\"logout\">\n                                {{ $t(\"account.common.logout\") }}\n                            </el-dropdown-item>\n                        </el-dropdown-menu>\n                    </template>\n                </el-dropdown>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport User from \"@iruxu/rx-common/utils/user\";\nimport { logout, updateUserInfo } from \"@/service/account\";\nexport default {\n    name: \"PageHeader\",\n    data: function () {\n        return {};\n    },\n    computed: {\n        routeMeta() {\n            return this.$route.meta;\n        },\n        profile() {\n            return this.$store.state.user;\n        },\n        avatar() {\n            return (this.profile?.avatar && this.profile.avatar != \"null\") || require(\"@/assets/img/test.png\");\n        },\n        app() {\n            return this.$store.state.app;\n        },\n        lang() {\n            return User.getLocale();\n        },\n    },\n    watch: {},\n    methods: {\n        logout() {\n            logout().then(() => {\n                User.logout();\n                this.$router.push({ name: \"email-login\" });\n            });\n        },\n        onLangChange(lang) {\n            updateUserInfo({ lang }, { app: this.app }).then(() => {\n                // User.setLocale(lang);\n                // this.$i18n.locale = lang;\n                location.reload();\n            });\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"@/assets/css/common/page-header.less\";\n</style>\n","import { render } from \"./page-header.vue?vue&type=template&id=74be1584\"\nimport script from \"./page-header.vue?vue&type=script&lang=js\"\nexport * from \"./page-header.vue?vue&type=script&lang=js\"\n\nimport \"./page-header.vue?vue&type=style&index=0&id=74be1584&lang=less\"\n\nimport exportComponent from \"/home/runner/work/i/i/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div class=\"p-bind p-destroy-account\">\n        <page-header></page-header>\n        <div class=\"m-bind-block m-destroy-account\" v-if=\"!isNext\">\n            <div class=\"m-bind-block__pic\">\n                <img src=\"@/assets/img/bind/destroy.svg\" />\n            </div>\n            <div class=\"m-bind-block__main\">\n                <h1 class=\"u-header\">{{ $t(\"security.nav.destroy\") }}</h1>\n                <div class=\"u-slogan\" v-html=\"$t('security.destroy.alert')\"></div>\n                <div class=\"m-login-card m-card-main\">\n                    <el-button type=\"danger\" size=\"large\" @click=\"onNext\" style=\"width: 100%\">{{\n                        $t(\"security.destroy.next\")\n                    }}</el-button>\n                </div>\n            </div>\n        </div>\n        <div class=\"m-bind-block m-destroy-document\" v-else>\n            <div class=\"u-document\" v-html=\"document\"></div>\n            <div class=\"u-op\">\n                <el-checkbox size=\"large\" v-model=\"isAgree\">{{ $t(\"security.destroy.agree\") }}</el-checkbox>\n                <el-button\n                    type=\"danger\"\n                    :loading=\"loading\"\n                    :disabled=\"loading || !isAgree\"\n                    @click=\"submit\"\n                    size=\"large\"\n                    >{{ $t(\"security.destroy.confirm\") }}</el-button\n                >\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport { destroyAccount } from \"@/service/account\";\nimport { getDocument } from \"@/service/document\";\nimport pageHeader from \"@/components/common/page-header.vue\";\nimport User from \"@iruxu/rx-common/utils/user\";\nimport { getCdnLink } from \"@iruxu/rx-common/utils/common\";\nexport default {\n    name: \"dashboard-security-destroy\",\n    components: {\n        pageHeader,\n    },\n    data() {\n        return {\n            loading: false,\n            isNext: false,\n            slug: \"destroy_account\",\n            document: \"\",\n            lang: User.getLocale(),\n            isAgree: false,\n        };\n    },\n    computed: {\n        ...mapState([\"app\"]),\n        isCn() {\n            // 中文\n            return this.lang === \"zh-CN\";\n        },\n    },\n    watch: {\n        lang() {\n            this.load();\n        },\n    },\n    methods: {\n        onNext() {\n            this.isNext = true;\n            this.load();\n        },\n        load() {\n            const slug = this.slug;\n            if (this.isCn) {\n                getDocument(slug).then((res) => {\n                    this.document = res.data.data?.content || \"-\";\n                });\n            } else {\n                const path = getCdnLink(`/common/document/${slug}/${slug}-${this.lang}.txt`);\n                fetch(path)\n                    .then((res) => {\n                        if (!res.ok) {\n                            throw new Error(res.status);\n                        }\n                        return res.text();\n                    })\n                    .then((data) => {\n                        this.document = data;\n                    })\n                    .catch((error) => {\n                        console.error(error);\n                        this.document = \"-\";\n                    });\n            }\n        },\n        logout() {\n            User.logout();\n            this.$router.replace({ name: \"email-login\" });\n        },\n        submit() {\n            this.$prompt(this.$t(\"security.destroy.confirmTip\"), this.$t(\"common.messagebox.title\"), {\n                confirmButtonText: this.$t(\"common.messagebox.confirm\"),\n                cancelButtonText: this.$t(\"common.messagebox.cancel\"),\n                inputPattern: /^[^\\u4e00-\\u9fa5]{6,30}$/,\n                inputErrorMessage: this.$t(\"account.common.passwordError\"),\n            })\n                .then(({ value }) => {\n                    const data = {\n                        password: value,\n                    };\n                    const params = {};\n                    if (this.app !== \"iruxu\") {\n                        params.app = this.app;\n                    }\n                    this.loading = true;\n                    destroyAccount(data, params).then(() => {\n                        this.$message.success(this.$t(\"security.destroy.success\"));\n                        this.logout();\n                    });\n                })\n                .catch(() => {});\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/account/common.less\";\n@import \"~@/assets/css/account/email/login.less\";\n@import \"~@/assets/css/notification/bind/bind.less\";\n.m-destroy-document {\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 20px;\n    box-sizing: border-box;\n    gap: 20px;\n    .u-document {\n        flex: 1;\n        width: 100%;\n        height: 100%;\n        font-size: 12px;\n        color: #999;\n        overflow: auto;\n    }\n    .u-op {\n        width: 100%;\n        .flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        .el-button {\n            .w(200px);\n        }\n    }\n}\n</style>\n","import { render } from \"./destroy.vue?vue&type=template&id=0de95cf4\"\nimport script from \"./destroy.vue?vue&type=script&lang=js\"\nexport * from \"./destroy.vue?vue&type=script&lang=js\"\n\nimport \"./destroy.vue?vue&type=style&index=0&id=0de95cf4&lang=less\"\n\nimport exportComponent from \"/home/runner/work/i/i/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["getDocument","slug","$cms","get","class","_createElementBlock","_createElementVNode","$options","title","_toDisplayString","desc","_createVNode","_component_lang_select","selected","onChange","lang","_component_el_dropdown","trigger","dropdown","_component_el_dropdown_menu","_component_el_dropdown_item","onClick","_ctx","username","nickname","name","data","computed","routeMeta","this","$route","meta","profile","$store","state","user","avatar","require","app","User","watch","methods","logout","then","$router","push","onLangChange","updateUserInfo","location","reload","__exports__","render","_component_page_header","$data","innerHTML","_component_el_checkbox","size","$event","_component_el_button","type","loading","disabled","src","_imports_0","style","components","pageHeader","isNext","document","isAgree","mapState","isCn","load","onNext","res","content","path","getCdnLink","fetch","ok","Error","status","text","catch","error","console","replace","submit","$prompt","$t","confirmButtonText","cancelButtonText","inputPattern","inputErrorMessage","value","password","params","destroyAccount","$message","success"],"sourceRoot":""}