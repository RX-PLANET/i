"use strict";(self["webpackChunki"]=self["webpackChunki"]||[]).push([[849],{8026:function(e,a,s){s.d(a,{FP:function(){return i},Iq:function(){return l},oP:function(){return t},pI:function(){return o}});var r=s(6102);async function t(e){return(0,r.VM)().get("/api/uc/user/account/email/valid",{params:{email:e}}).then((e=>{var a;return null===(a=e.data.data)||void 0===a?void 0:a.isExist}))}function o(e,a){return(0,r.VM)().post("/api/uc/user/account/email/register",e,{params:a})}function i(e,a){return(0,r.VM)({mute:!0}).post("/api/uc/user/account/email/active",e,{params:a})}function l(e,a){return(0,r.VM)({mute:!0}).post("/api/uc/user/account/email/login",e,{params:a})}},1837:function(e,a,s){s.d(a,{Z:function(){return c}});var r=s(6252);const t={class:"m-footer"};function o(e,a,s,o,i,l){return(0,r.wg)(),(0,r.iD)("footer",t,"© RX-PLANET")}var i={name:"RX-Footer1",props:[],components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},l=s(3744);const n=(0,l.Z)(i,[["render",o]]);var c=n},8849:function(e,a,s){s.r(a),s.d(a,{default:function(){return E}});var r=s(6252);const t={class:"p-account p-account-email p-account-email--register"},o={class:"m-register"};function i(e,a,s,i,l,n){const c=(0,r.up)("logo"),m=(0,r.up)("register",!0),u=(0,r.up)("el-row"),d=(0,r.up)("Footer");return(0,r.wg)(),(0,r.iD)("div",t,[(0,r.Wm)(u,{class:"m-container",justify:"center"},{default:(0,r.w5)((()=>[(0,r._)("div",o,[(0,r.Wm)(c,{app:l.app},null,8,["app"]),(0,r.Wm)(m,{app:l.app,loginLink:n.loginLink},null,8,["app","loginLink"])])])),_:1}),(0,r.Wm)(d)])}var l=s(3577);const n={class:"m-card m-register-card"},c={key:0,class:"m-card-main"},m={class:"m-card-form-label"},u={class:"m-card-form-label"},d={key:0},p={class:"m-card-form-label"},g={class:"m-card-form-label"},h={class:"u-terms"},f=["href"],w={key:1,class:"m-card-main"},k={key:2,class:"m-card-main"},v={class:"m-footer"},b={class:"m-footer-skip"},_=["href"];function $(e,a,s,t,o,i){const $=(0,r.up)("lang-select"),y=(0,r.up)("card-header"),z=(0,r.up)("el-input"),W=(0,r.up)("el-form-item"),C=(0,r.up)("el-button"),V=(0,r.up)("el-form"),U=(0,r.up)("el-checkbox"),L=(0,r.up)("el-alert");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",n,[(0,r.Wm)(y,{title:e.$t("account.common.register")},{right:(0,r.w5)((()=>[(0,r.Wm)($,{lang:o.form.lang,onChange:i.changeLang},null,8,["lang","onChange"])])),_:1},8,["title"]),null===o.success?((0,r.wg)(),(0,r.iD)("div",c,[(0,r.Wm)(V,{class:"m-card-form","hide-required-asterisk":"",ref:"registerForm",model:o.form,rules:o.rules,size:"large","status-icon":"","label-position":"top"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{prop:"email"},{label:(0,r.w5)((()=>[(0,r._)("div",m,[(0,r._)("span",null,[(0,r.Uk)((0,l.zw)(e.$t("account.email.address")),1),a[5]||(a[5]=(0,r._)("i",{class:"is-required"},"*",-1))])])])),default:(0,r.w5)((()=>[(0,r.Wm)(z,{modelValue:o.form.email,"onUpdate:modelValue":a[0]||(a[0]=e=>o.form.email=e),modelModifiers:{trim:!0,lazy:!0},size:"large"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(W,{prop:"code",class:"u-code"},{label:(0,r.w5)((()=>[(0,r._)("div",u,[(0,r._)("span",null,[(0,r.Uk)((0,l.zw)(e.$t("account.email.code")),1),a[6]||(a[6]=(0,r._)("i",{class:"is-required"},"*",-1))])])])),default:(0,r.w5)((()=>[(0,r.Wm)(z,{modelValue:o.form.code,"onUpdate:modelValue":a[1]||(a[1]=e=>o.form.code=e),modelModifiers:{trim:!0},size:"large"},null,8,["modelValue"]),(0,r.Wm)(C,{class:"u-btn-send",size:"small",onClick:i.senCode,disabled:o.interval>0||!o.emailChecked},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.$t("account.email.send")),1),o.interval?((0,r.wg)(),(0,r.iD)("span",d,"("+(0,l.zw)(o.interval)+"s)",1)):(0,r.kq)("",!0)])),_:1},8,["onClick","disabled"])])),_:1}),(0,r.Wm)(W,{prop:"password",class:"m-password"},{label:(0,r.w5)((()=>[(0,r._)("div",p,[(0,r._)("span",null,[(0,r.Uk)((0,l.zw)(e.$t("account.common.password")),1),a[7]||(a[7]=(0,r._)("i",{class:"is-required"},"*",-1))])])])),default:(0,r.w5)((()=>[(0,r.Wm)(z,{modelValue:o.form.password,"onUpdate:modelValue":a[2]||(a[2]=e=>o.form.password=e),modelModifiers:{trim:!0},type:"password",size:"large","show-password":""},null,8,["modelValue"])])),_:1}),(0,r.Wm)(W,{prop:"password1",class:"m-password"},{label:(0,r.w5)((()=>[(0,r._)("div",g,[(0,r._)("span",null,[(0,r.Uk)((0,l.zw)(e.$t("account.common.passwordConfirm")),1),a[8]||(a[8]=(0,r._)("i",{class:"is-required"},"*",-1))])])])),default:(0,r.w5)((()=>[(0,r.Wm)(z,{modelValue:o.form.password1,"onUpdate:modelValue":a[3]||(a[3]=e=>o.form.password1=e),modelModifiers:{trim:!0},type:"password",size:"large","show-password":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),(0,r._)("div",h,[(0,r.Wm)(U,{modelValue:o.agreement,"onUpdate:modelValue":a[4]||(a[4]=e=>o.agreement=e),class:"u-checkbox"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.$t("account.common.read"))+" ",1),(0,r._)("a",{href:o.terms,target:"_blank"},"《"+(0,l.zw)(e.$t("account.common.terms"))+"》 ",9,f)])),_:1},8,["modelValue"])]),(0,r.Wm)(C,{class:"u-btn u-submit",type:"primary",disabled:!i.canRegister,onClick:i.onRegister},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.$t("account.common.register")),1)])),_:1},8,["disabled","onClick"])])):(0,r.kq)("",!0),1==o.success?((0,r.wg)(),(0,r.iD)("main",w,[(0,r.Wm)(L,{class:"m-alert",title:e.$t("account.email.registerSuccess"),type:"success",description:e.$t("account.email.registerSuccessDesc"),"show-icon":"",closable:!1},null,8,["title","description"]),(0,r.Wm)(C,{size:"large",class:"u-btn u-back",type:"primary",onClick:i.goLogin},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.$t("account.common.login")),1)])),_:1},8,["onClick"])])):(0,r.kq)("",!0),0==o.success?((0,r.wg)(),(0,r.iD)("main",k,[(0,r.Wm)(L,{class:"m-alert",title:e.$t("account.email.registerFailed"),type:"error",description:e.$t("account.email.registerFailedDesc"),"show-icon":"",closable:!1},null,8,["title","description"]),(0,r.Wm)(C,{size:"large",class:"u-btn u-back",type:"primary",onClick:i.onBack},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.$t("account.common.back")),1)])),_:1},8,["onClick"])])):(0,r.kq)("",!0)]),(0,r._)("div",v,[(0,r._)("div",b,[(0,r.Uk)((0,l.zw)(e.$t("account.common.hadAccount"))+" ",1),(0,r._)("a",{class:"u-link",href:s.loginLink},(0,l.zw)(e.$t("account.common.login"))+" »",9,_)])])],64)}var y=s(8026),z=s(9158),W={name:"EmailRegister",props:{app:{type:String,default:""},loginLink:{type:String,default:""}},components:{},data(){return{form:{email:"",password:"",password1:"",lang:"",code:""},rules:{email:[{required:!0,message:this.$t("account.email.addressPlaceholder"),trigger:"blur"},{type:"email",message:this.$t("account.email.addressError"),trigger:"blur"},{validator:this.check,trigger:"blur"}],password:[{required:!0,message:this.$t("account.common.passwordPlaceholder"),trigger:"blur"},{min:6,max:30,message:this.$t("account.common.passwordError"),trigger:"blur"}],password1:[{required:!0,message:this.$t("account.common.password2Placeholder"),trigger:"blur"},{min:6,max:30,message:this.$t("account.common.passwordError"),trigger:"blur"},{validator:(e,a,s)=>{a!==this.form.password?s(new Error(this.$t("account.common.passwordError2"))):s()},trigger:"blur"}]},agreement:!1,success:null,emailChecked:!1,terms:"/document/terms",interval:0,timer:null}},computed:{canRegister(){return this.form.email&&this.form.password&&this.form.code&&this.form.password1&&this.agreement}},mounted(){z.Z.generateFingerprint(),this.form.lang=z.Z.getLocale()},methods:{async check(e,a,s){if(a){const e=await(0,y.oP)(a);if(e)return this.emailChecked=!1,void s(new Error(this.$t("account.email.emailRegistered")));this.emailChecked=!0,s()}else this.emailChecked=!1,s(new Error(this.$t("account.email.addressPlaceholder")))},senCode(){this.form.email?(0,y.pI)({email:this.form.email},{app:this.app}).then((()=>{this.$message.success(this.$t("account.email.sendSuccess")),this.interval=60,this.timer=setInterval((()=>{this.interval--,this.interval<=0&&clearInterval(this.timer)}),1e3)})):this.$refs.registerForm.validateField("email")},onRegister(){this.$refs.registerForm.validate((async e=>{if(e){const e={lang:this.form.lang,email:this.form.email,password:this.form.password,code:this.form.code};(0,y.FP)(e,{app:this.app}).then((()=>{this.success=!0})).catch((()=>{this.success=!1}))}}))},goLogin(){location.href=this.loginLink},onBack(){this.success=null},changeLang(e){this.form.lang=e}}},C=s(3744);const V=(0,C.Z)(W,[["render",$]]);var U=V,L=s(1837),q={name:"AccountEmailRegister",components:{register:U,Footer:L.Z},data(){return{app:""}},computed:{loginLink(){const e=this.$router.resolve({name:"email-login"});return e.href}},mounted(){const e=new URLSearchParams(document.location.search);e.has("app")?this.app=e.get("app"):this.app="miipet"}};const F=(0,C.Z)(q,[["render",i]]);var E=F}}]);
//# sourceMappingURL=849.be49c68f.js.map