"use strict";(self["webpackChunki"]=self["webpackChunki"]||[]).push([[778],{8026:function(e,t,r){r.d(t,{FP:function(){return s},Iq:function(){return i},oP:function(){return a},pI:function(){return n}});var o=r(6102);async function a(e){return(0,o.VM)().get("/api/uc/user/account/email/valid",{params:{email:e}}).then((e=>{var t;return null===(t=e.data.data)||void 0===t?void 0:t.isExist}))}function n(e,t){return(0,o.VM)().post("/api/uc/user/account/email/register",e,{params:t})}function s(e,t){return(0,o.VM)({mute:!0}).post("/api/uc/user/account/email/active",e,{params:t})}function i(e,t){return(0,o.VM)({mute:!0}).post("/api/uc/user/account/email/login",e,{params:t})}},1837:function(e,t,r){r.d(t,{Z:function(){return l}});var o=r(6252);const a={class:"m-footer"};function n(e,t,r,n,s,i){return(0,o.wg)(),(0,o.iD)("footer",a,"Â© RX-PLANET")}var s={name:"RX-Footer1",props:[],components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},i=r(3744);const c=(0,i.Z)(s,[["render",n]]);var l=c},778:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});var o=r(6252);const a={class:"p-account p-account-email--login"},n={class:"m-login"};function s(e,t,r,s,i,c){const l=(0,o.up)("logo"),u=(0,o.up)("login",!0),m=(0,o.up)("el-row"),d=(0,o.up)("Footer");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(m,{class:"m-container",justify:"center"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o.Wm)(l,{app:i.app},null,8,["app"]),(0,o.Wm)(u,{app:i.app,registerLink:c.registerLink,resetPwdLink:c.resetPwdLink},null,8,["app","registerLink","resetPwdLink"])])])),_:1}),(0,o.Wm)(d)])}var i=r(3577),c=r(9963);const l={class:"m-card m-login-card"},u={key:0,class:"m-card-main"},m={class:"m-card-form-label"},d={class:"m-card-form-label"},p={class:"u-resetpwd"},g=["href"],h={key:1,class:"m-card-main"},f=["href"],w={class:"m-footer"},k={class:"m-footer-skip"},v=["href"];function b(e,t,r,a,n,s){const b=(0,o.up)("lang-select"),_=(0,o.up)("card-header"),L=(0,o.up)("el-input"),$=(0,o.up)("el-form-item"),y=(0,o.up)("el-form"),P=(0,o.up)("el-alert"),W=(0,o.up)("el-button");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[(0,o.Wm)(_,{title:e.$t("account.common.login")},{right:(0,o.w5)((()=>[(0,o.Wm)(b,{lang:s.lang},null,8,["lang"])])),_:1},8,["title"]),n.success?((0,o.wg)(),(0,o.iD)("div",h,[(0,o.Wm)(P,{class:"m-alert",title:e.$t("account.common.loginSuccess"),type:"success",description:e.$t("account.common.loginSuccessDesc"),"show-icon":"",closable:!1},null,8,["title","description"]),(0,o._)("a",{class:"el-button u-btn el-button--primary u-skip",href:n.redirect},(0,i.zw)(n.redirect_button),9,f)])):((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)(y,{class:"m-card-form","hide-required-asterisk":"",ref:"loginForm","label-position":"top",model:n.form,rules:n.rules,size:"large"},{default:(0,o.w5)((()=>[(0,o.Wm)($,{prop:"email"},{label:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o._)("span",null,(0,i.zw)(e.$t("account.email.address")),1)])])),default:(0,o.w5)((()=>[(0,o.Wm)(L,{modelValue:n.form.email,"onUpdate:modelValue":t[0]||(t[0]=e=>n.form.email=e),modelModifiers:{trim:!0},size:"large",tabindex:"1"},null,8,["modelValue"])])),_:1}),(0,o.Wm)($,{prop:"password"},{label:(0,o.w5)((()=>[(0,o._)("div",d,[(0,o._)("span",null,(0,i.zw)(e.$t("account.common.password")),1),(0,o._)("span",p,[(0,o._)("a",{href:r.resetPwdLink},(0,i.zw)(e.$t("account.email.forgetPassword"))+"?",9,g)])])])),default:(0,o.w5)((()=>[(0,o.Wm)(L,{modelValue:n.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>n.form.password=e),modelModifiers:{trim:!0},onKeydown:(0,c.D2)(s.onLogin,["enter"]),type:"password",size:"large","show-password":"",tabindex:"2"},null,8,["modelValue","onKeydown"])])),_:1})])),_:1},8,["model","rules"]),n.error?((0,o.wg)(),(0,o.j4)(P,{key:0,class:"u-alert",type:"error","show-icon":"",title:n.error},null,8,["title"])):(0,o.kq)("",!0),(0,o.Wm)(W,{class:"u-btn u-submit",type:"primary",onClick:s.onLogin,tabindex:"3"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.$t("account.common.login")),1)])),_:1},8,["onClick"])]))]),(0,o._)("div",w,[(0,o._)("div",k,[(0,o.Uk)((0,i.zw)(e.$t("account.common.noAccount"))+" ",1),(0,o._)("a",{class:"u-link",href:r.registerLink},(0,i.zw)(e.$t("account.common.registerNow"))+" ðŸ‘‰",9,v)])])],64)}var _=r(8026),L=r(9158),$={name:"EmailLogin",props:{app:{type:String,default:""},registerLink:{type:String,default:""},resetPwdLink:{type:String,default:""}},data(){return{form:{email:"",password:""},rules:{email:[{required:!0,message:this.$t("account.email.addressPlaceholder"),trigger:"blur"},{type:"email",message:this.$t("account.email.addressError"),trigger:["blur"]}],password:[{required:!0,message:this.$t("account.common.passwordPlaceholder"),trigger:"blur"},{min:6,max:30,message:this.$t("account.common.passwordError"),trigger:"blur"}]},error:"",success:!1,redirect:"",redirect_button:"",homepage:"/"}},computed:{canSubmit(){return this.form.email&&this.form.password},lang(){return L.Z.getLocale()}},mounted(){L.Z.generateFingerprint(),this.checkDirect()},methods:{onLogin(){this.error="",this.$refs.loginForm.validate((async e=>{e&&(0,_.Iq)(this.form,{app:this.app}).then((e=>{this.$message.success(this.$t("account.common.loginSuccess")),this.success=!0,L.Z.update(e.data.data).then((()=>{this.skip()}))})).catch((e=>{var t;this.success=!1,this.error=(null===(t=e.data)||void 0===t?void 0:t.msg)||this.$t("account.email.loginFailed")}))}))},checkDirect(){let e=new URLSearchParams(document.location.search),t=e.get("redirect");t?(this.redirect=t,this.redirect_button=this.$t("account.common.jump")):(this.redirect=this.homepage,this.redirect_button=this.$t("account.common.backToHome"))},skip(){this.redirect&&setTimeout((()=>{location.href=decodeURIComponent(this.redirect)}),1200)}}},y=r(3744);const P=(0,y.Z)($,[["render",b]]);var W=P,z=r(1837),V={name:"AccountEmailLogin",components:{login:W,Footer:z.Z},data(){return{app:""}},computed:{registerLink(){const e=this.$router.resolve({name:"email-register"});return e.href},resetPwdLink(){const e=this.$router.resolve({name:"email-reset-password"});return e.href}},mounted(){const e=new URLSearchParams(document.location.search);e.has("app")?this.app=e.get("app"):this.app="miipet"}};const D=(0,y.Z)(V,[["render",s]]);var S=D}}]);
//# sourceMappingURL=778.2f064d22.js.map