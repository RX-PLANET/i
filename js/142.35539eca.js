(self["webpackChunki"]=self["webpackChunki"]||[]).push([[142],{9387:function(t){!function(e,n){t.exports=n()}(0,(function(){"use strict";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(n,i,o){var s,a=function(t,n,i){void 0===i&&(i={});var o=new Date(t),s=function(t,n){void 0===n&&(n={});var i=n.timeZoneName||"short",o=t+"|"+i,s=e[o];return s||(s=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:i}),e[o]=s),s}(n,i);return s.formatToParts(o)},r=function(e,n){for(var i=a(e,n),s=[],r=0;r<i.length;r+=1){var c=i[r],u=c.type,l=c.value,f=t[u];f>=0&&(s[f]=parseInt(l,10))}var m=s[3],d=24===m?0:m,h=s[0]+"-"+s[1]+"-"+s[2]+" "+d+":"+s[4]+":"+s[5]+":000",p=+e;return(o.utc(h).valueOf()-(p-=p%1e3))/6e4},c=i.prototype;c.tz=function(t,e){void 0===t&&(t=s);var n,i=this.utcOffset(),a=this.toDate(),r=a.toLocaleString("en-US",{timeZone:t}),c=Math.round((a-new Date(r))/1e3/60),u=15*-Math.round(a.getTimezoneOffset()/15)-c;if(Number(u)){if(n=o(r,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(u,!0),e){var l=n.utcOffset();n=n.add(i-l,"minute")}}else n=this.utcOffset(0,e);return n.$x.$timezone=t,n},c.offsetName=function(t){var e=this.$x.$timezone||o.tz.guess(),n=a(this.valueOf(),e,{timeZoneName:t}).find((function(t){return"timezonename"===t.type.toLowerCase()}));return n&&n.value};var u=c.startOf;c.startOf=function(t,e){if(!this.$x||!this.$x.$timezone)return u.call(this,t,e);var n=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return u.call(n,t,e).tz(this.$x.$timezone,!0)},o.tz=function(t,e,n){var i=n&&e,a=n||e||s,c=r(+o(),a);if("string"!=typeof t)return o(t).tz(a);var u=function(t,e,n){var i=t-60*e*1e3,o=r(i,n);if(e===o)return[i,e];var s=r(i-=60*(o-e)*1e3,n);return o===s?[i,o]:[t-60*Math.min(o,s)*1e3,Math.max(o,s)]}(o.utc(t,i).valueOf(),c,a),l=u[0],f=u[1],m=o(l).utcOffset(f);return m.$x.$timezone=a,m},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(t){s=t}}}))},178:function(t){!function(e,n){t.exports=n()}(0,(function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(i,o,s){var a=o.prototype;s.utc=function(t){var e={date:t,utc:!0,args:arguments};return new o(e)},a.utc=function(e){var n=s(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},a.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var r=a.parse;a.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),r.call(this,t)};var c=a.init;a.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else c.call(this)};var u=a.utcOffset;a.utcOffset=function(i,o){var s=this.$utils().u;if(s(i))return this.$u?0:s(this.$offset)?u.call(this):this.$offset;if("string"==typeof i&&(i=function(t){void 0===t&&(t="");var i=t.match(e);if(!i)return null;var o=(""+i[0]).match(n)||["-",0,0],s=o[0],a=60*+o[1]+ +o[2];return 0===a?0:"+"===s?a:-a}(i),null===i))return this;var a=Math.abs(i)<=16?60*i:i,r=this;if(o)return r.$offset=a,r.$u=0===i,r;if(0!==i){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(r=this.local().add(a+c,t)).$offset=a,r.$x.$localOffset=c}else r=this.utc();return r};var l=a.format;a.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,e)},a.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var f=a.toDate;a.toDate=function(t){return"s"===t&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var m=a.diff;a.diff=function(t,e,n){if(t&&this.$u===t.$u)return m.call(this,t,e,n);var i=this.local(),o=s(t).local();return m.call(i,o,e,n)}}}))},878:function(t,e,n){"use strict";n.d(e,{Dv:function(){return a},UA:function(){return s},Vm:function(){return o}});var i=n(6102);function o(){return(0,i.VM)().get("/api/uc/user/security/device")}function s(t,e){return(0,i.VM)().put(`/api/uc/user/security/device/${t}`,e)}function a(t){return(0,i.VM)().delete(`/api/uc/user/security/device/${t}`)}},1259:function(t,e,n){"use strict";n.d(e,{$Y:function(){return w},zp:function(){return $},p6:function(){return v},Xj:function(){return b},HO:function(){return g}});var i=n(9996),o=(n(1814),n(7484)),s=n.n(o),a=n(178),r=n.n(a),c=n(9387),u=n.n(c);s().extend(r()),s().extend(u());class l{constructor(t=null){this.userTimezone=t||Intl.DateTimeFormat().resolvedOptions().timeZone,this.storedTimezone="Asia/Shanghai"}convert(t){const e=s()(t).tz(this.storedTimezone);return e.tz(this.userTimezone)}format(t,e){return this.convert(t).format(e)}}var f=l;const m={iPhone:"iphone","Android Phone":"android",Pad:"pad",iPad:"pad","Windows PC":"windows",Mac:"mac",Phone:"phone","Linux PC":"linux","Unknown Device":"pad"};var d=n(2727);const h=new f,{global:{t:p}}=d.a;function v(t,e="date"){if(t){if("date"===e)return h.format(t,"YYYY-MM-DD");if("time"===e)return h.format(t,"HH:mm:ss");if("hour"===e)return h.format(t,"HH:mm");if("datetime"===e)return h.format(t,"YYYY-MM-DD HH:mm:ss")}}function g(t){const e={};for(const n in t)null!==t[n]&&void 0!==t[n]&&""!==t[n]&&(e[n]=t[n]);return e}function $(t){if(navigator.clipboard)navigator.clipboard.writeText(t),(0,i.bM)({title:p("common.messagebox.copySuccess"),message:t,type:"success"});else{const e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),(0,i.bM)({title:p("common.messagebox.copySuccess"),message:t,type:"success"})}}function w({array:t=[],key:e="key",remainKey:n=""}={}){return null===t||void 0===t||!t.length||!t.every((t=>e in t))||n&&!t.every((t=>n in t))?(console.log("【参数错误】",t,e,n),{}):t.reduce(((t,i)=>({...t,[i[e]]:n?i[n]:i})),{})}function b(t){if(!t)return"";const e=m[t]||"";return e?n(2598)(`./${e}.svg`):""}},6430:function(t,e,n){"use strict";n.d(e,{Z:function(){return b}});var i=n(6252),o=n(3577),s=n(9963);const a={class:"c-header"},r={class:"c-header_main"},c={class:"c-header-left"},u={key:0,class:"c-header__title"},l={key:1,class:"c-header__desc"},f={class:"c-header-right"},m={class:"c-header__profile"},d={class:"u-name"};function h(t,e,n,h,p,v){var g,$;const w=(0,i.up)("lang-select"),b=(0,i.up)("el-dropdown-item"),x=(0,i.up)("el-dropdown-menu"),D=(0,i.up)("el-dropdown");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("div",r,[(0,i._)("div",c,[null!==(g=v.routeMeta)&&void 0!==g&&g.title?((0,i.wg)(),(0,i.iD)("div",u,(0,o.zw)(v.routeMeta.title),1)):(0,i.kq)("",!0),null!==($=v.routeMeta)&&void 0!==$&&$.desc?((0,i.wg)(),(0,i.iD)("div",l,(0,o.zw)(v.routeMeta.desc),1)):(0,i.kq)("",!0)]),(0,i._)("div",f,[(0,i.Wm)(w,{class:"c-header__lang",selected:"icon",onChange:v.onLangChange,lang:v.lang},null,8,["onChange","lang"]),(0,i.Wm)(D,{trigger:"click"},{dropdown:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(b,{onClick:(0,s.iM)(v.logout,["stop"])},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t.$t("account.common.logout")),1)])),_:1},8,["onClick"])])),_:1})])),default:(0,i.w5)((()=>[(0,i._)("div",m,[(0,i._)("span",d,(0,o.zw)(v.profile.username||v.profile.nickname),1)])])),_:1})])])])}var p=n(9158),v=n(2878),g={name:"PageHeader",data:function(){return{}},computed:{routeMeta(){return this.$route.meta},profile(){return this.$store.state.user},avatar(){var t;return(null===(t=this.profile)||void 0===t?void 0:t.avatar)&&"null"!=this.profile.avatar||n(9743)},app(){return this.$store.state.app},lang(){return p.Z.getLocale()}},watch:{},methods:{logout(){(0,v.kS)().then((()=>{p.Z.logout(),this.$router.push({name:"email-login"})}))},onLangChange(t){(0,v.gS)({lang:t},{app:this.app}).then((()=>{location.reload()}))}}},$=n(3744);const w=(0,$.Z)(g,[["render",h]]);var b=w},1142:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return D}});var i=n(6252),o=n(3577),s=n(9963);const a={class:"p-device"},r={class:"l-dashboard-primary"},c={class:"m-common-table w-card"},u={class:"m-table-filter"},l={class:"u-op"},f={class:"u-row"},m={class:"u-row"},d=["src"],h={class:"u-op"};function p(t,e,n,p,v,g){const $=(0,i.up)("page-header"),w=(0,i.up)("Refresh"),b=(0,i.up)("el-icon"),x=(0,i.up)("el-tooltip"),D=(0,i.up)("Edit"),y=(0,i.up)("el-table-column"),_=(0,i.up)("el-button"),k=(0,i.up)("el-table"),z=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i.Wm)($),(0,i._)("div",r,[(0,i._)("div",c,[(0,i._)("div",u,[(0,i._)("div",l,[(0,i.Wm)(x,{class:"u-box-item",effect:"light",content:t.$t("common.table.refresh"),placement:"top"},{default:(0,i.w5)((()=>[(0,i._)("div",{class:"u-op-icon u-refresh",onClick:e[0]||(e[0]=(...t)=>g.load&&g.load(...t))},[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w)])),_:1})])])),_:1},8,["content"])])]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(k,{class:"m-table",data:v.tableData,"max-height":"600px",size:"large"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{label:t.$t("security.device.name"),"show-overflow-tooltip":""},{default:(0,i.w5)((({row:t})=>[(0,i._)("div",f,[(0,i.Uk)((0,o.zw)(t.remark||t.name)+" ",1),(0,i.Wm)(b,{class:"u-edit",onClick:e=>g.onRemark(t)},{default:(0,i.w5)((()=>[(0,i.Wm)(D)])),_:2},1032,["onClick"])])])),_:1},8,["label"]),(0,i.Wm)(y,{label:t.$t("security.device.type"),prop:"name","show-overflow-tooltip":""},{default:(0,i.w5)((({row:t})=>[(0,i._)("div",m,[g.getDeviceIcon(t.name)?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"u-device",src:g.getDeviceIcon(t.name)},null,8,d)):(0,i.kq)("",!0),(0,i._)("span",null,(0,o.zw)(t.name),1)])])),_:1},8,["label"]),(0,i.Wm)(y,{label:t.$t("security.device.lastTime"),prop:"last_used",width:"280"},{default:(0,i.w5)((({row:t})=>[(0,i.Uk)((0,o.zw)(g.formatDate(t.last_used,"datetime")),1)])),_:1},8,["label"]),(0,i.Wm)(y,{label:t.$t("security.device.lastLocation"),prop:"location","show-overflow-tooltip":"","min-width":"180"},null,8,["label"]),(0,i.Wm)(y,{label:t.$t("common.table.op"),width:"120",align:"right"},{default:(0,i.w5)((({row:e})=>[(0,i._)("div",h,[(0,i.Wm)(x,{class:"u-box-item",effect:"light",content:t.$t("common.table.remove"),placement:"top"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{class:"u-view",circle:"",plain:"",icon:"Close",onClick:(0,s.iM)((t=>g.onDelete(e)),["stop"]),size:"small"},null,8,["onClick"])])),_:2},1032,["content"])])])),_:1},8,["label"])])),_:1},8,["data"])),[[z,v.loading]])])])])}var v=n(1259),g=n(878),$=n(6430),w={name:"dashboard-security-device",components:{pageHeader:$.Z},data(){return{loading:!1,tableData:[]}},mounted(){this.load()},methods:{getDeviceIcon:v.Xj,formatDate:v.p6,copyText:v.zp,load(){this.loading=!0,(0,g.Vm)().then((t=>{this.tableData=t.data.data||[]})).finally((()=>{this.loading=!1}))},onRemark(t){const{id:e,remark:n,name:i}=t;this.$prompt(this.$t("common.table.remark_placeholder"),this.$t("common.messagebox.title"),{confirmButtonText:this.$t("common.messagebox.confirm"),cancelButtonText:this.$t("common.messagebox.cancel"),inputValue:n||i}).then((({value:n})=>{const i={remark:n};n!==t.remark&&(0,g.UA)(e,i).then((()=>{this.$notify({title:this.$t("common.messagebox.success"),type:"success",duration:2e3});const t=this.tableData.findIndex((t=>t.id===e));this.tableData[t].remark=n}))})).catch((()=>{}))},onDelete({id:t}){t&&this.$confirm(this.$t("common.table.removeAlert"),this.$t("common.messagebox.title"),{confirmButtonText:this.$t("common.messagebox.confirm"),cancelButtonText:this.$t("common.messagebox.cancel"),type:"warning"}).then((()=>{this.loading=!0,(0,g.Dv)(t).then((()=>{this.$notify({title:this.$t("common.messagebox.success"),type:"success",duration:2e3});const e=this.tableData.findIndex((e=>e.id===t));this.tableData.splice(e,1)})).finally((()=>{this.loading=!1}))})).catch((()=>{}))}}},b=n(3744);const x=(0,b.Z)(w,[["render",p]]);var D=x},2598:function(t,e,n){var i={"./android.svg":3044,"./iphone.svg":4581,"./linux.svg":2175,"./mac.svg":864,"./pad.svg":1921,"./pc.svg":5172,"./phone.svg":5519,"./windows.svg":1184};function o(t){var e=s(t);return n(e)}function s(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}o.keys=function(){return Object.keys(i)},o.resolve=s,t.exports=o,o.id=2598},3044:function(t,e,n){"use strict";t.exports=n.p+"img/android.6e2cae2e.svg"},4581:function(t,e,n){"use strict";t.exports=n.p+"img/iphone.037232b8.svg"},2175:function(t,e,n){"use strict";t.exports=n.p+"img/linux.e999220d.svg"},864:function(t,e,n){"use strict";t.exports=n.p+"img/mac.f2227271.svg"},1921:function(t,e,n){"use strict";t.exports=n.p+"img/pad.955d800a.svg"},5172:function(t,e,n){"use strict";t.exports=n.p+"img/pc.099a1c96.svg"},5519:function(t,e,n){"use strict";t.exports=n.p+"img/phone.67713635.svg"},1184:function(t,e,n){"use strict";t.exports=n.p+"img/windows.1c9c1966.svg"},2570:function(t,e,n){"use strict";t.exports=n.p+"img/logo.e213a56c.svg"},9743:function(t,e,n){"use strict";t.exports=n.p+"img/test.2ffd992c.png"},1814:function(t){"use strict";t.exports=JSON.parse('{"S":"https://cdn.iruxu.com","v":"https://uc.iruxu.com"}')}}]);
//# sourceMappingURL=142.35539eca.js.map