"use strict";(self["webpackChunki"]=self["webpackChunki"]||[]).push([[63],{6430:function(e,i,a){a.d(i,{Z:function(){return _}});var t=a(6252),l=a(3577),n=a(9963);const o={class:"c-header"},s={class:"c-header_main"},r={class:"c-header-left"},d={key:0,class:"c-header__title"},c={key:1,class:"c-header__desc"},m={class:"c-header-right"},u={class:"c-header__profile"},p={class:"u-name"};function f(e,i,a,f,g,h){var w,k;const v=(0,t.up)("lang-select"),_=(0,t.up)("el-dropdown-item"),b=(0,t.up)("el-dropdown-menu"),$=(0,t.up)("el-dropdown");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",s,[(0,t._)("div",r,[null!==(w=h.routeMeta)&&void 0!==w&&w.title?((0,t.wg)(),(0,t.iD)("div",d,(0,l.zw)(h.routeMeta.title),1)):(0,t.kq)("",!0),null!==(k=h.routeMeta)&&void 0!==k&&k.desc?((0,t.wg)(),(0,t.iD)("div",c,(0,l.zw)(h.routeMeta.desc),1)):(0,t.kq)("",!0)]),(0,t._)("div",m,[(0,t.Wm)(v,{class:"c-header__lang",selected:"icon",onChange:h.onLangChange,lang:h.lang},null,8,["onChange","lang"]),(0,t.Wm)($,{trigger:"click"},{dropdown:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_,{onClick:(0,n.iM)(h.logout,["stop"])},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(e.$t("account.common.logout")),1)])),_:1},8,["onClick"])])),_:1})])),default:(0,t.w5)((()=>[(0,t._)("div",u,[(0,t._)("span",p,(0,l.zw)(h.profile.username||h.profile.nickname),1)])])),_:1})])])])}var g=a(9158),h=a(2878),w={name:"PageHeader",data:function(){return{}},computed:{routeMeta(){return this.$route.meta},profile(){return this.$store.state.user},avatar(){var e;return(null===(e=this.profile)||void 0===e?void 0:e.avatar)&&"null"!=this.profile.avatar||a(9743)},app(){return this.$store.state.app},lang(){return g.Z.getLocale()}},watch:{},methods:{logout(){(0,h.kS)().then((()=>{g.Z.logout(),this.$router.push({name:"email-login"})}))},onLangChange(e){(0,h.gS)({lang:e},{app:this.app}).then((()=>{location.reload()}))}}},k=a(3744);const v=(0,k.Z)(w,[["render",f]]);var _=v},7013:function(e,i,a){a.r(i),a.d(i,{default:function(){return W}});var t=a(6252),l=a(3577),n=a.p+"img/email.18fd9373.svg";const o={class:"p-bind p-bind-email"},s={class:"m-bind-email m-bind-block"},r={class:"m-bind-block__main"},d={class:"u-header"},c={class:"u-slogan"},m={class:"m-current"},u={class:"u-current"},p={key:0,class:"u-status--success"},f={class:"u-bind-tips"},g={key:1,class:"m-login-card m-card-main"},h={class:"m-card-form-label"},w={class:"m-card-form-label"},k={key:0};function v(e,i,a,v,_,b){const $=(0,t.up)("page-header"),C=(0,t.up)("CircleCheckFilled"),z=(0,t.up)("el-icon"),W=(0,t.up)("el-button"),E=(0,t.up)("el-input"),y=(0,t.up)("el-form-item"),q=(0,t.up)("el-form"),U=(0,t.up)("ArrowLeftBold");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t.Wm)($),(0,t._)("div",s,[i[5]||(i[5]=(0,t._)("div",{class:"m-bind-block__pic"},[(0,t._)("img",{src:n})],-1)),(0,t._)("div",r,[(0,t._)("h1",d,(0,l.zw)(e.$t("notification.email.bindEmail")),1),(0,t._)("div",c,(0,l.zw)(e.$t("notification.email.bindEmailAlert")),1),b.profile.email&&!_.isEdit?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t._)("div",m,[(0,t.Uk)((0,l.zw)(e.$t("notification.email.currentBind"))+": ",1),(0,t._)("span",u,(0,l.zw)(b.profile.email||e.$t("notification.email.noBind")),1),b.profile.email?((0,t.wg)(),(0,t.iD)("span",p,[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C)])),_:1})])):(0,t.kq)("",!0)]),(0,t._)("div",f,(0,l.zw)(e.$t("account.common.accountBind")),1),(0,t.Wm)(W,{class:"u-edit-btn",onClick:b.onEditBind},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(e.$t("account.common.editBind")),1)])),_:1},8,["onClick"])],64)):(0,t.kq)("",!0),!b.profile.email||_.isEdit?((0,t.wg)(),(0,t.iD)("div",g,[(0,t.Wm)(q,{class:"m-card-form","hide-required-asterisk":"",ref:"registerForm",model:_.form,rules:_.rules,size:"large","status-icon":"","label-position":"top"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{prop:"email"},{label:(0,t.w5)((()=>[(0,t._)("div",h,[(0,t._)("span",null,[(0,t.Uk)((0,l.zw)(e.$t("notification.email.address")),1),i[3]||(i[3]=(0,t._)("i",{class:"is-required"},"*",-1))])])])),default:(0,t.w5)((()=>[(0,t.Wm)(E,{modelValue:_.form.email,"onUpdate:modelValue":i[0]||(i[0]=e=>_.form.email=e),modelModifiers:{trim:!0},size:"large"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(y,{prop:"code",class:"u-code"},{label:(0,t.w5)((()=>[(0,t._)("div",w,[(0,t._)("span",null,[(0,t.Uk)((0,l.zw)(e.$t("notification.email.code")),1),i[4]||(i[4]=(0,t._)("i",{class:"is-required"},"*",-1))])])])),default:(0,t.w5)((()=>[(0,t.Wm)(E,{modelValue:_.form.code,"onUpdate:modelValue":i[1]||(i[1]=e=>_.form.code=e),modelModifiers:{trim:!0},placeholder:e.$t("notification.email.code"),size:"large"},null,8,["modelValue","placeholder"]),(0,t.Wm)(W,{class:"u-btn-send",size:"small",onClick:b.sendCode,disabled:_.interval>0||!_.form.email},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(e.$t("notification.email.send")),1),_.interval?((0,t.wg)(),(0,t.iD)("span",k,"("+(0,l.zw)(_.interval)+"s)",1)):(0,t.kq)("",!0)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1},8,["model","rules"]),(0,t.Wm)(W,{type:"primary",size:"large",disabled:!_.form.email||_.loading,onClick:b.submit,loading:_.loading,style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(e.$t("notification.email.confirm")),1)])),_:1},8,["disabled","onClick","loading"]),_.isEdit?((0,t.wg)(),(0,t.iD)("a",{key:0,class:"u-back",onClick:i[2]||(i[2]=(...e)=>b.onCancelEdit&&b.onCancelEdit(...e))},[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U)])),_:1}),(0,t.Uk)((0,l.zw)(e.$t("account.common.back")),1)])):(0,t.kq)("",!0)])):(0,t.kq)("",!0)])])])}var _=a(2878),b=a(6430),$={name:"dashboard-bind-email",components:{pageHeader:b.Z},props:{app:{type:String,default:"miipet"}},data(){return{form:{email:"",code:""},rules:{email:[{required:!0,message:this.$t("notification.email.addressPlaceholder"),trigger:"blur"},{validator:(e,i,a)=>{i===this.profile.email?a(new Error(this.$t("notification.email.sameError"))):a()},trigger:"blur"},{type:"email",message:this.$t("notification.email.addressError"),trigger:"blur"}],code:[{required:!0,message:this.$t("notification.phone.codePlaceholder"),trigger:"blur"}]},interval:0,timer:null,loading:!1,isEdit:!1}},computed:{profile(){return this.$store.state.user}},methods:{sendCode(){(0,_.I8)({email:this.form.email},{app:this.app}).then((()=>{this.$message.success(this.$t("notification.email.sendSuccess")),this.interval=60;const e=setInterval((()=>{this.interval--,this.interval<=0&&clearInterval(e)}),1e3)}))},submit(){this.$refs.registerForm.validate((e=>{e&&(this.loading=!0,(0,_.lm)({code:this.form.code},{app:this.app}).then((()=>{this.$message.success(this.$t("account.common.bindSuccess")),this.$store.dispatch("getProfile")})).finally((()=>{this.loading=!1})))}))},onEditBind(){this.isEdit=!0},onCancelEdit(){this.isEdit=!1}}},C=a(3744);const z=(0,C.Z)($,[["render",v]]);var W=z},9743:function(e,i,a){e.exports=a.p+"img/test.2ffd992c.png"}}]);
//# sourceMappingURL=63.371122a0.js.map